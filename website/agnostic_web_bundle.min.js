!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.agnostic=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var time_utils=_dereq_("utils/time_utils");var str_utils=_dereq_("utils/string_utils");var path_utils=_dereq_("utils/path_utils");var sprintf=_dereq_("utils/sprintf");var shell_cmd_to_text=_dereq_("shell/shell_descriptor");var shell_cmd_to_html=_dereq_("shell/shell_HTML_descriptor");var posix_shell_parser=_dereq_("shell/posix_shell_parser");var OperatingSystem=_dereq_("os/os_state");var FileSystem=_dereq_("os/filesystem");var Streams=_dereq_("os/streams");var ProcessState=_dereq_("os/process_state");var ProgramBase=_dereq_("programs/program_base");var Program_cat=_dereq_("programs/cat");var Program_cut=_dereq_("programs/cut");var Program_date=_dereq_("programs/date");var Program_echo=_dereq_("programs/echo");var Program_false=_dereq_("programs/false");var Program_head=_dereq_("programs/head");var Program_printf=_dereq_("programs/printf");var Program_seq=_dereq_("programs/seq");var Program_shell=_dereq_("programs/shell");var Program_tac=_dereq_("programs/tac");var Program_tail=_dereq_("programs/tail");var Program_true=_dereq_("programs/true");var Program_wc=_dereq_("programs/wc");var programs={cat:Program_cat,cut:Program_cut,date:Program_date,echo:Program_echo,"false":Program_false,head:Program_head,printf:Program_printf,seq:Program_seq,sh:Program_shell,tac:Program_tac,tail:Program_tail,"true":Program_true,wc:Program_wc};var agnostic={str_utils:str_utils,ob_utils:ob_utils,time_utils:time_utils,sprintf:sprintf.sprintf,OperatingSystem:OperatingSystem,FileSystem:FileSystem,ProcessState:ProcessState,programs:programs,shell:{parse_command:posix_shell_parser.parse,command_to_text:shell_cmd_to_text,command_to_html:shell_cmd_to_html}};module.exports=agnostic},{"os/filesystem":2,"os/os_state":3,"os/process_state":4,"os/streams":6,"programs/cat":7,"programs/cut":8,"programs/date":9,"programs/echo":10,"programs/false":11,"programs/head":12,"programs/printf":13,"programs/program_base":14,"programs/seq":15,"programs/shell":16,"programs/tac":17,"programs/tail":18,"programs/true":19,"programs/wc":20,"shell/posix_shell_parser":21,"shell/shell_HTML_descriptor":22,"shell/shell_descriptor":23,"utils/object_utils":25,"utils/path_utils":26,"utils/sprintf":28,"utils/string_utils":29,"utils/time_utils":30}],2:[function(_dereq_,module,exports){"use strict";var path_utils=_dereq_("utils/path_utils");var Storage=_dereq_("os/storage_object");var str_utils=_dereq_("utils/string_utils");var ob_utils=_dereq_("utils/object_utils");module.exports=FileSystem;function FileSystem(){this.name="FileSystem";var d=new Storage.Directory;d.chown(0,0);d.chmod(493);this.max_inode=1;this.inodes={1:d};this.hierarchy={"/":{inode:1,type:"directory",subnodes:{}}}}function FilesystemException(message,relatedfile){this.message=message;this.name="FilesystemException";this.relatedfile=relatedfile;this.toString=function(){return message+" (file: '"+this.relatedfile+"')"}}FilesystemException.prototype=new Error;FilesystemException.prototype.constructor=FilesystemException;FileSystem.prototype.exception=FilesystemException;FileSystem.prototype.__allocate_inode=function(name){this.max_inode++;return this.max_inode};FileSystem.prototype.path_exists=function(name){return this.__get_hnode(name)!==null};FileSystem.prototype.is_directory=function(name){var i=this.__get_hnode(name);return i!==null&&i["type"]==="directory"};FileSystem.prototype.is_file=function(name){var i=this.__get_hnode(name);return i!==null&&i["type"]==="file"};FileSystem.prototype.__validate_hnodes=function(){var root=this.hierarchy["/"];var inodes=this.inodes;var seen_inodes={};var validate_node=function(root,path){if(!("type"in root))throw"Filesystem internal error: path("+path+") has 'root' without 'type':"+JSON.stringify(root);if(root["type"]!=="directory"&&root["type"]!=="file")throw"Filesystem internal error: path("+path+") has 'root' with invalid 'type':"+JSON.stringify(root);if(!("inode"in root))throw"Filesystem internal error: path("+path+") has 'root' without 'inode':"+JSON.stringify(root);var inode=root["inode"];if(!(inode in inodes))throw"Filesystem internal error: path("+path+") has 'root' with non-existing 'inode':"+JSON.stringify(root);seen_inodes[inode]=1;if(root["type"]!=="directory")return;if(!("subnodes"in root))throw"Filesystem internal error: path("+path+") has 'root' with directory and no 'subnodes':"+JSON.stringify(root);var subnodes=root["subnodes"];for(var i in subnodes){validate_node(subnodes[i],path+"/"+i)}};validate_node(root,"/");for(var i in inodes){if(!(i in seen_inodes))throw"Filesystem internal error: inode("+i+") doesn't have a corresponding hierarchy path:"+JSON.stringify(inodes[i])}};FileSystem.prototype.__get_hnode=function(name){var abspath=path_utils.canonicalize(name);if(abspath==="")throw"Filesystem internal error: path_exists called with empty path";if(abspath==="/")return this.hierarchy["/"];abspath=abspath.slice(1);var levels=abspath.split("/");var root=this.hierarchy["/"];while(levels.length>0){if(root["type"]!=="directory")return null;var subnodes=root["subnodes"];var current_name=levels.shift();if(!(current_name in subnodes))return null;root=subnodes[current_name]}return root};FileSystem.prototype.mkdir=function(name){ob_utils.VerifyString(name);if(!str_utils.startsWith(name,"/"))throw"Implementation Limitation: mkdir requires absolutes path (got '"+name+"')";var abspath=path_utils.canonicalize(name);var basename=path_utils.basename(abspath);var dirname=path_utils.dirname(abspath);if(this.path_exists(abspath))throw new FilesystemException("File/Directory Exists",name);if(!this.path_exists(dirname))throw new FilesystemException("No such file (parent directory doesn't exist)",name);if(!this.is_directory(dirname))throw new FilesystemException("Can't create directory (parent path isn't a directory)",name);this.__validate_hnodes();var inode=this.__allocate_inode();var d=new Storage.Directory;d.chown(0,0);d.chmod(493);this.inodes[inode]=d;var i=this.__get_hnode(dirname);i["subnodes"][basename]={inode:inode,type:"directory",subnodes:{}};this.__validate_hnodes()};FileSystem.prototype.openfile=function(name,create_if_needed){ob_utils.VerifyString(name);if(!str_utils.startsWith(name,"/"))throw"Implementation Limitation: mkdir requires absolutes path (got '"+name+"')";var abspath=path_utils.canonicalize(name);var basename=path_utils.basename(abspath);var dirname=path_utils.dirname(abspath);var exists=this.path_exists(abspath);var is_file=this.is_file(abspath);if(exists&&!is_file)throw new FilesystemException("Can't open file (path is not a regular file)",name);if(!exists){if(!create_if_needed)throw new FilesystemException("File/Directory does not exist",name);if(!this.path_exists(dirname))throw new FilesystemException("Can't create file (parent directory doesn't exist)",name);if(!this.is_directory(dirname))throw new FilesystemException("Can't create file (parent path isn't a directory)",name);var inode=this.__allocate_inode();var f=new Storage.File;f.chown(0,0);f.chmod(493);this.inodes[inode]=f;var i=this.__get_hnode(dirname);i["subnodes"][basename]={inode:inode,type:"file"};this.__validate_hnodes();return f}else{var i=this.__get_hnode(abspath);var inode=i["inode"];var f=this.inodes[inode];return f}};FileSystem.prototype.remove=function(name){ob_utils.VerifyString(name);if(!str_utils.startsWith(name,"/"))throw"Implementation Limitation: mkdir requires absolutes path (got '"+name+"')";var abspath=path_utils.canonicalize(name);var dirname=path_utils.dirname(abspath);var basename=path_utils.basename(abspath);var exists=this.path_exists(abspath);if(!exists)throw new FilesystemException("No such file/directory",name);var prnt=this.__get_hnode(dirname);var subnodes=prnt["subnodes"];if(!(basename in subnodes))throw"Filesystem internal error: path("+abspath+") not found in parent's subnodes";var hnode=subnodes[basename];var inode=hnode["inode"];if(hnode["type"]==="directory"){var subsubnodes=hnode["subnodes"];if(!ob_utils.IsObjectEmpty(subsubnodes))throw new FilesystemException("Directory not empty")}delete subnodes[basename];delete this.inodes[inode];this.__validate_hnodes()};FileSystem.prototype.opendir=function(name){ob_utils.VerifyString(name);if(!str_utils.startsWith(name,"/"))throw"Implementation Limitation: mkdir opendir absolutes path (got '"+name+"')";var abspath=path_utils.canonicalize(name);var basename=path_utils.basename(abspath);var dirname=path_utils.dirname(abspath);var exists=this.path_exists(abspath);if(!exists)throw new FilesystemException("Directory doesn't exist",name);var is_directory=this.is_directory(abspath);if(exists&&!is_directory)throw new FilesystemException("Path is not a directory",name);var i=this.__get_hnode(abspath);var inode=i["inode"];var d=this.inodes[inode];return d};FileSystem.prototype.readdir=function(name){ob_utils.VerifyString(name);if(!str_utils.startsWith(name,"/"))throw"Implementation Limitation: readdir requires absolutes path (got '"+name+"')";var abspath=path_utils.canonicalize(name);var exists=this.path_exists(abspath);if(!exists)throw new FilesystemException("Directory doesn't exist",name);var is_directory=this.is_directory(abspath);if(exists&&!is_directory)throw new FilesystemException("Path is not a directory",name);var i=this.__get_hnode(abspath);var subnodes=i["subnodes"];var results=[];if(abspath==="/")abspath="";for(var i in subnodes){results.push(abspath+"/"+i)}return results};FileSystem.prototype.reset=function(){var d=new Storage.Directory;d.chown(0,0);d.chmod(493);this.max_inode=1;this.inodes={1:d};this.hierarchy={"/":{inode:1,type:"directory",subnodes:{}}};this.__validate_hnodes()};FileSystem.prototype.debug_dump=function(){console.log("inodes = {");for(var i in this.inodes){var fullpath=i;var storage_obj=this.inodes[i];console.log('  { "'+fullpath+"\" => '%j'",storage_obj)}console.log("}");var str=JSON.stringify(this.hierarchy,undefined,2);console.log("hierarchy = "+str)}},{"os/storage_object":5,"utils/object_utils":25,"utils/path_utils":26,"utils/string_utils":29}],3:[function(_dereq_,module,exports){"use strict";var time_utils=_dereq_("utils/time_utils");module.exports=OperatingSystem;function OperatingSystemException(message){this.message=message;this.name="OperatingSystemException"}OperatingSystemException.prototype=new Error;OperatingSystemException.prototype.constructor=OperatingSystemException;function OperatingSystem(){this.last_pid=0;function allocate_pid(){this.last_pid++;return this.last_pid}function time(){return time_utils.get_sys_time()}function uname(){return{sysname:"agnostic",nodename:"FOOBAR",release:"0.0.1",version:"0.0.1",machine:"JavaScript"}}this.time=time;this.uname=uname;this.allocate_pid=allocate_pid;return this}},{"utils/time_utils":30}],4:[function(_dereq_,module,exports){"use strict";module.exports=ProcessState;var OperatingSystem=_dereq_("os/os_state");var FileSystem=_dereq_("os/filesystem");var Streams=_dereq_("os/streams");var ob_utils=_dereq_("utils/object_utils");var path_utils=_dereq_("utils/path_utils");function ProcessState(OS,FS){if(!(OS instanceof OperatingSystem))throw new TypeError("internal error: OS parameter is not an OperatingSystem");if(!(FS instanceof FileSystem))throw new TypeError("internal error: FS parameter is not a FileSystem");function getOS(){return OS}function getFS(){return FS}var pid=getOS().allocate_pid();var ppid=1;var cwd="/";var env={};var stdin=new Streams.InputStream;var stdout=new Streams.OutputStream;var stderr=new Streams.OutputStream;var last_exit_code=null;function clone(){var new_ps=new ProcessState(getOS(),getFS());new_ps.ppid=pid;new_ps.cwd=cwd;for(var i in env){new_ps.env[i]=env[i]}return new_ps}function getpid(){return pid}function getppid(){return ppid}function getcwd(){return cwd}function chdir(path){ob_utils.VerifyString(path);var newcwd;if(path_utils.isAbsolute(path))newcwd=path_utils.canonicalize(path);else newcwd=path_utils.canonicalize(cwd+"/"+path);cwd=newcwd}function setenv(name,value,overwrite){ob_utils.VerifyString(name);ob_utils.VerifyString(value);ob_utils.VerifyBoolean(overwrite);if(!(name in env)||overwrite)env[name]=value;return 0}function unsetenv(name){if(name in env)delete env[name];return 0}function existsenv(name){ob_utils.VerifyString(name);return name in env}function getenv(name,def){ob_utils.VerifyString(name);ob_utils.VerifyString(def);if(existsenv(name))return env[name];return def}function environ(){var tmp={};for(var key in env){tmp[key]=env[key]}return tmp}function clearenv(){env={}}this.getpid=getpid;this.getppid=getppid;this.getcwd=getcwd;this.chdir=chdir;this.setenv=setenv;this.unsetenv=unsetenv;this.existsenv=existsenv;this.getenv=getenv;this.environ=environ;this.clearenv=clearenv;this.stderr=stderr;this.stdin=stdin;this.stdout=stdout;this.OS=getOS;this.FS=getFS;this.clone=clone;return this}},{"os/filesystem":2,"os/os_state":3,"os/streams":6,"utils/object_utils":25,"utils/path_utils":26}],5:[function(_dereq_,module,exports){"use strict";var time_utils=_dereq_("utils/time_utils");var ob_utils=_dereq_("utils/object_utils");module.exports={StorageObject:StorageObject,File:FileObject,Directory:DirectoryObject};function StorageObject(){this.name="StorageObject";this.mode=438;this.uid=1e3;this.gid=1e3;this.get_time=time_utils.get_sys_time;var t=this.get_time();this.access_time=t;this.change_time=t;this.modify_time=t;this.size=-1;this.object_type=null}StorageObject.prototype.__get_os_time=function(){var t=this.get_time();return t};StorageObject.prototype.__update_ctime=function(){var t=this.__get_os_time();this.change_time=t};StorageObject.prototype.__update_atime=function(){var t=this.__get_os_time();this.access_time=t};StorageObject.prototype.__update_mtime=function(){var t=this.__get_os_time();this.modify_time=t};StorageObject.prototype.stat=function(){return{uid:this.uid,gid:this.gid,mode:this.mode,atime:this.access_time,ctime:this.change_time,mtime:this.modify_time,size:this.size,object_type:this.object_type}};StorageObject.prototype.chown=function(new_uid,new_gid){ob_utils.VerifyInteger(new_uid);ob_utils.VerifyInteger(new_gid);this.uid=new_uid;this.gid=new_gid;this.__update_ctime()};StorageObject.prototype.chmod=function(new_mode){ob_utils.VerifyInteger(new_mode);this.mode=new_mode;this.__update_ctime()};StorageObject.prototype.utime=function(new_atime,new_mtime){ob_utils.VerifyInteger(new_atime);ob_utils.VerifyInteger(new_mtime);this.access_time=new_atime;this.modify_time=new_mtime;this.__update_ctime()};function FileObject(){this.name="FileObject";this.object_type="file";this.lines=[];this.size=0}FileObject.prototype=new StorageObject;FileObject.prototype.get_all_lines=function(){this.__update_atime();return this.lines};FileObject.prototype.write=function(arr){FileObject.prototype.truncate.call(this);FileObject.prototype.append.call(this,arr)};FileObject.prototype.truncate=function(){StorageObject.prototype.__update_atime.call(this);StorageObject.prototype.__update_mtime.call(this);this.lines=[];this.size=0};FileObject.prototype.append=function(arr){this.__update_atime();this.__update_mtime();ob_utils.VerifyArray(arr);var count_chars=0;for(var i in arr){var line=arr[i];ob_utils.VerifyString(line);this.lines.push(line);count_chars+=line.length+1}this.size+=count_chars};function DirectoryObject(){this.name="DirectoryObject";this.object_type="directory";this.size=0}DirectoryObject.prototype=new StorageObject},{"utils/object_utils":25,"utils/time_utils":30}],6:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");module.exports={GenericStream:GenericStream,InputStream:InputStream,OutputStream:OutputStream};function GenericStream(){this.name="GenericStream";this.lines=[];this.fill_input_callback=null}GenericStream.prototype.__clear_lines=function(){this.lines=[]};GenericStream.prototype.__push_line=function(text){ob_utils.VerifyString(text);this.lines.push(text)};GenericStream.prototype.__push_lines=function(arr){ob_utils.VerifyArray(arr);for(var i in arr){this.__push_line(arr[i])}};GenericStream.prototype.__set_lines=function(arr){this.__clear_lines();this.__push_lines(arr)};GenericStream.prototype.__fill_input=function(){if(this.lines.length===0&&this.fill_input_callback!==null){this.lines=this.fill_input_callback()}};GenericStream.prototype.__is_empty=function(){return this.lines.length===0};GenericStream.prototype.__shift_line=function(){this.__fill_input();if(this.lines.length>0)return this.lines.shift();return null};GenericStream.prototype.__get_lines=function(){this.__fill_input();var temp=this.lines;this.lines=[];return temp};function InputStream(){this.name="InputStream";this.lines=[];this.fill_input_callback=null}InputStream.prototype=new GenericStream;InputStream.prototype.constructor=InputStream;InputStream.prototype.get_line=InputStream.prototype.__shift_line;InputStream.prototype.get_all_lines=InputStream.prototype.__get_lines;function OutputStream(){this.name="OutputStream";this.lines=[]}OutputStream.prototype=new GenericStream;OutputStream.prototype.constructor=OutputStream;OutputStream.prototype.put_line=OutputStream.prototype.__push_line;OutputStream.prototype.put_lines=OutputStream.prototype.__push_lines},{"utils/object_utils":25}],7:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var sprintf=_dereq_("utils/sprintf");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramCat;function ProgramCat(){this.name="ProgramCat";this.program_name="cat";this.files=[];this.show_ends=false;this.show_tabs=false;this.show_number=false;this.number_nonblank=false;this.show_nonprinting=false;this.squeeze_blank=false;this.current_line=0;this.last_line_blank=false}ProgramCat.prototype=new ProgramBase;ProgramCat.prototype.constructor=ProgramCat;ProgramCat.prototype.parse_command_line=function(){var parser=new PosixGetOpt("A(show-all)b(number-nonblank)eE(show-ends)n(number)s(squeeze_blank)tT(show-tabs)uv(show-nonprinting)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"A":this.show_nonprinting=true;this.show_ends=true;this.show_tabs=true;break;case"b":this.number_nonblank=true;this.show_number=true;break;case"e":this.show_ends=true;this.show_nonprinting=true;break;case"E":this.show_ends=true;break;case"n":this.show_number=true;break;case"s":this.squeeze_blank=true;break;case"t":this.show_nonprinting=true;this.show_tabs=true;break;case"T":this.show_tabs=true;break;case"u":break;case"v":this.show_nonprinting=true;break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}var args=this.argv.slice(parser.optind());if(args.length===0)args.push("-");this.files=args};ProgramCat.prototype.cat_content=function(content){for(var i in content){var line=content[i];var blank_line=line==="";if(this.squeeze_blank&&blank_line&&this.last_line_blank)continue;if(!this.number_nonblank||!blank_line)this.current_line++;if(this.show_ends)line=line+"$";if(this.show_tabs)line=line.replace(/\t/g,"^I");if(this.show_number){if(!blank_line||!this.number_nonblank)line=sprintf.sprintf("%6d  ",this.current_line)+line}this.runtime.stdout.put_line(line);this.last_line_blank=blank_line}};ProgramCat.prototype.cat_stdin=function(){if(this.lines===0)return;var content=this.runtime.stdin.get_all_lines();this.cat_content(content)};ProgramCat.prototype.cat_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}if(this.lines===0)return;var content=fl.get_all_lines();this.cat_content(content)};ProgramCat.prototype.internal_run=function(){this.parse_command_line();this.current_line=0;this.last_line_blank=false;for(var i in this.files){var filename=this.files[i];if(filename==="-")this.cat_stdin();else this.cat_file(filename)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/object_utils":25,"utils/posix-getopt":27,"utils/sprintf":28}],8:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var sprintf=_dereq_("utils/sprintf");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramCut;function ProgramCut(){this.name="ProgramCut";this.program_name="cut";this.files=[];this.fields=null;this.characters=null;this.bytes=null;this.positions={};this.min_position_and_above=null;this.max_position_and_below=null;this.complement=false;this.only_delimited=false;this.input_separator=null;this.output_separator=null}ProgramCut.prototype=new ProgramBase;ProgramCut.prototype.constructor=ProgramCut;ProgramCut.prototype.parse_command_line=function(){var parser=new PosixGetOpt("b:(bytes)f:(fields)c:(characters)d:(delimiter)nစ(complement)s(only-delimiter)ဆ:(output-delimiter)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"b":if(this.fields||this.bytes||this.characters)this.error_invalid_argument("only one type of list may be specified");this.bytes=true;this.parse_position_list(option.optarg);break;case"f":if(this.fields||this.bytes||this.characters)this.error_invalid_argument("only one type of list may be specified");this.fields=true;this.parse_position_list(option.optarg);break;case"c":if(this.fields||this.bytes||this.characters)this.error_invalid_argument("only one type of list may be specified");this.characters=true;this.parse_position_list(option.optarg);break;case"n":break;case"d":this.input_separator=option.optarg;break;case"s":this.only_delimited=true;break;case"ဆ":this.output_separator=option.optarg;break;case"စ":this.complement=true;break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}if(!this.fields&&!this.bytes&&!this.characters)this.error_invalid_argument("you must specify a list of bytes, characters, or fields");if(this.only_delimited&&!this.fields)this.error_invalid_argument("suppressing non-delimited lines makes sense only when operating on fields");if(this.input_separator&&!this.fields)this.error_invalid_argument("an input delimiter may be specified only when operating on fields");if(this.input_separator===null){if(this.fields)this.input_separator="	";else this.input_separator=""}if(this.output_separator===null)this.output_separator=this.input_separator;if(this.input_separator.indexOf("\n")!=-1||this.output_separator.indexOf("\n")!=-1)this.error_not_implemented_feature("New-Line separator","this vesion of 'cut' does not support new-line as field separator");var args=this.argv.slice(parser.optind());if(args.length===0)args.push("-");this.files=args};ProgramCut.prototype.parse_position_list=function(list){var items=list.split(",");for(var i in items){var t=items[i];var m;if(m=t.match(/^(\d+)$/)){this.positions[parseInt(m[1])]=1}else if(m=t.match(/^(\d+)-$/)){var v=parseInt(m[1]);if(this.min_position_and_above===null||v<this.min_position_and_above)this.min_position_and_above=v}else if(m=t.match(/^-(\d+)$/)){var v=parseInt(m[1]);if(this.max_position_and_below===null||v>this.max_position_and_below)this.max_position_and_below=v}else if(m=t.match(/^(\d+)-(\d+)$/)){var min=parseInt(m[1]);var max=parseInt(m[2]);if(min>max)this.error_invalid_argument("invalid decreasing range");for(var j=min;j<=max;j++)this.positions[j]=1}else{this.error_invalid_argument("invalid byte, character or field list")}}if(this.max_position_and_below!==null&&this.min_position_and_above!==null&&this.max_position_and_below>=this.min_position_and_above){this.min_position_and_above=1;this.max_position_and_below=null;this.positions={}}};ProgramCut.prototype.cut_content=function(content){for(var i in content){var line=content[i];var items=[];items=line.split(this.input_separator);if(items.length===1){if(!this.only_delimited)this.runtime.stdout.put_line(line);continue}var output_items=[];for(var j in items){var pos=parseInt(j)+1;var match=pos in this.positions||this.max_position_and_below!==null&&pos<=this.max_position_and_below||this.min_position_and_above!==null&&pos>=this.min_position_and_above;if(this.complement)match=!match;if(match)output_items.push(items[j])}var output_line=output_items.join(this.output_separator);this.runtime.stdout.put_line(output_line)}};ProgramCut.prototype.cut_stdin=function(){var content=this.runtime.stdin.get_all_lines();this.cut_content(content)};ProgramCut.prototype.cut_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}var content=fl.get_all_lines();this.cut_content(content)};ProgramCut.prototype.internal_run=function(){this.parse_command_line();for(var i in this.files){var filename=this.files[i];if(filename==="-")this.cut_stdin();else this.cut_file(filename)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/object_utils":25,"utils/posix-getopt":27,"utils/sprintf":28}],9:[function(_dereq_,module,exports){"use strict";var sprintf=_dereq_("utils/sprintf");var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramDate;function ProgramDate(){this.name="ProgramDate"}ProgramDate.prototype=new ProgramBase;ProgramDate.prototype.constructor=ProgramDate;ProgramDate.prototype.internal_run=function(){if(this.argv.length>0)throw new ProgramBase.ProgramFeatureNotImplemented("date","options","date options are not implemented");var tm=this.runtime.OS().time();var dt=new Date(tm*1e3);var weekday=new Array(7);weekday[0]="Sun";weekday[1]="Mon";weekday[2]="Tue";weekday[3]="Wed";weekday[4]="Thu";weekday[5]="Fri";weekday[6]="Sat";var month_name=new Array(12);month_name[0]="Jan";month_name[1]="Feb";month_name[2]="Mar";month_name[3]="Apr";month_name[4]="May";month_name[5]="Jun";month_name[6]="Jul";month_name[7]="Aug";month_name[8]="Sep";month_name[9]="Oct";month_name[10]="Nov";month_name[11]="Dec";var text=sprintf.sprintf("%s %s %d %02d:%02d:%02d %04d",weekday[dt.getDay()],month_name[dt.getMonth()],dt.getDate(),dt.getHours(),dt.getMinutes(),dt.getSeconds(),dt.getFullYear());this.runtime.stdout.put_line(text);return 0}},{"programs/program_base":14,"utils/sprintf":28}],10:[function(_dereq_,module,exports){"use strict";var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramEcho;function ProgramEcho(){this.name="ProgramEcho";this.program_name="echo"}ProgramEcho.prototype=new ProgramBase;ProgramEcho.prototype.constructor=ProgramEcho;ProgramEcho.prototype.internal_run=function(){if(this.argv.length>0)this.runtime.stdout.put_line(this.argv.join(" "));return 0}},{"programs/program_base":14}],11:[function(_dereq_,module,exports){"use strict";var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramFalse;function ProgramFalse(){this.name="ProgramFalse";this.program_name="false"}ProgramFalse.prototype=new ProgramBase;ProgramFalse.prototype.constructor=ProgramFalse;ProgramFalse.prototype.internal_run=function(){return 1}},{"programs/program_base":14}],12:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var sprintf=_dereq_("utils/sprintf");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramHead;function ProgramHead(){this.name="ProgramHead";this.program_name="head";this.verbose=false;this.quiet=false;this.lines="10";this.bytes=null;this.files=[]}ProgramHead.prototype=new ProgramBase;ProgramHead.prototype.constructor=ProgramHead;ProgramHead.prototype.parse_command_line=function(){var parser=new PosixGetOpt(":1234567890c:(bytes)n:(lines)q(quiet)v(verbose)ဂ(silent)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lines=parseInt(option.option,10);break;case"c":this.bytes=option.optarg;break;case"n":this.lines=option.optarg;break;case"q":this.quiet=true;break;case"v":this.verbose=true;break;case"ဂ":this.quiet=true;break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}var args=this.argv.slice(parser.optind());if(args.length===0)args.push("-");this.files=args;if(args.length>1&&!this.quiet&&!this.verbose)this.verbose=true;if(this.bytes)this.error_not_implemented_feature("-c/--bytes","head with bytes is not implemented");var multiplier=1;if(/b$/.test(this.lines))multiplier=512;if(/kB$/.test(this.lines))multiplier=1e3;if(/K$/.test(this.lines))multiplier=1024;if(/MB$/.test(this.lines))multiplier=1e3*1e3;if(/M$/.test(this.lines))multiplier=1024*1024;if(/GB$/.test(this.lines))multiplier=1e3*1e3*1e3;if(/G$/.test(this.lines))multiplier=1024*1024*1024;this.lines=this.lines.replace(/(b|kB|K|MB|M|GB|G)$/,"");if(!ob_utils.IsStrictDecimalIntegerValue(this.lines))this.error_invalid_argument(this.lines+": invalid number of lines");this.lines=parseInt(this.lines)*multiplier};ProgramHead.prototype.head_content=function(content){if(this.lines>0){content=content.slice(0,this.lines)}else{if(content.length<-this.lines)return;content=content.slice(0,content.length+this.lines)}this.runtime.stdout.put_lines(content)};ProgramHead.prototype.head_stdin=function(){if(this.verbose)this.runtime.stdout.put_line("==> standard input <==");if(this.lines===0)return;var content=this.runtime.stdin.get_all_lines();this.head_content(content)};ProgramHead.prototype.head_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}if(this.verbose)this.runtime.stdout.put_line("==> "+filename+" <==");if(this.lines===0)return;var content=fl.get_all_lines();this.head_content(content)};ProgramHead.prototype.internal_run=function(){this.parse_command_line();for(var i in this.files){var filename=this.files[i];if(filename==="-")this.head_stdin();else this.head_file(filename)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/object_utils":25,"utils/posix-getopt":27,"utils/sprintf":28}],13:[function(_dereq_,module,exports){"use strict";var sprintf=_dereq_("utils/sprintf");var str_utils=_dereq_("utils/string_utils");var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramPrintf;function ProgramPrintf(){this.name="ProgramPrintf";this.program_name="printf"}ProgramPrintf.prototype=new ProgramBase;ProgramPrintf.prototype.constructor=ProgramPrintf;ProgramPrintf.prototype.internal_run=function(){if(this.argv.length===0)this.error_invalid_argument("missing operand");var input_args=this.argv;var output_text="";var format_string=this.argv.shift();var expected_args=sprintf.sprintf_format_get_default_values(format_string);if(expected_args.length===0){output_text=sprintf.sprintf(format_string)}else{do{var temp_args=input_args.splice(0,expected_args.length);if(temp_args.length<expected_args.length){var default_values=expected_args.slice(temp_args.length);temp_args=temp_args.concat(default_values)}var result=sprintf.vsprintf(format_string,temp_args);output_text+=result
}while(input_args.length>0)}output_text=str_utils.unbackslash(output_text);output_text=output_text.replace(/\n$/,"");this.runtime.stdout.put_lines(output_text.split("\n"));return 0}},{"programs/program_base":14,"utils/sprintf":28,"utils/string_utils":29}],14:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var ProcessState=_dereq_("os/process_state");module.exports=ProgramBase;function ProgramBase(){this.name="ProgramBase";this.program_name="(base)";this.runtime={};this.argv=[];this.argv0=""}ProgramBase.prototype.run=function(process_state,argv){if(!(process_state instanceof ProcessState))throw new TypeError("run() called with wrong parameter (1st param is not ProcessState)");if(process_state.stderr===null)throw new TypeError("run() called with process_stae.stderr==null");if(process_state.stdout===null)throw new TypeError("run() called with process_stae.stdout==null");if(process_state.stdin===null)throw new Typerror("run() called with process_stae.stdin==null");if(!ob_utils.IsArray(argv))throw new TypeError("run() called with wrong parameter (2nd param is not array of command-line parameters)");if(argv.length===0)throw new TypeError("run() called with empty argv");argv.forEach(ob_utils.VerifyString);this.argv0=argv.shift();this.argv=argv;this.runtime=process_state;var exit_code=1;this.runtime.last_exit_code=exit_code;try{exit_code=this.internal_run()}catch(err){if(err instanceof ProgramExitSuccess){exit_code=0}else if(err instanceof ProgramExitFailure){if(err["message"])this.runtime.stderr.put_line(err.message);exit_code=err.exit_code}else{throw err}}this.runtime.last_exit_code=exit_code;return exit_code};ProgramBase.prototype.show_try_help=function(){this.runtime.stderr.put_line("Try '"+this.program_name+" --help' for more information.")};ProgramBase.prototype.error_invalid_argument=function(msg){ob_utils.VerifyString(msg);this.runtime.stderr.put_line(this.program_name+": "+msg);this.show_try_help();throw new ProgramExitFailure(1)};ProgramBase.prototype.exit_error=function(msg){this.runtime.stderr.put_line(this.program_name+": "+msg);throw new ProgramExitFailure(1)};ProgramBase.prototype.error_not_implemented_feature=function(feature,msg){ob_utils.VerifyString(feature);ob_utils.VerifyString(msg);throw new ProgramFeatureNotImplemented(this.program_name,feature,msg)};ProgramBase.prototype.internal_run=function(){console.log("ProgramBase.internal_Run...");throw new ProgramExitFailure(1,"Not implemented")};function ProgramExitSuccess(){this.name="ProgramExitSuccess"}ProgramExitSuccess.prototype=new Error;ProgramExitSuccess.prototype.constructor=ProgramExitSuccess;function ProgramExitFailure(ExitCode,message){this.name="ProgramExitFailure";this.exit_code=ExitCode;this.message=message}ProgramExitFailure.prototype=new Error;ProgramExitFailure.prototype.constructor=ProgramExitFailure;function ProgramExecutionError(message){this.name="ProgramExecutionError";this.message=message}ProgramExecutionError.prototype=new Error;ProgramExecutionError.prototype.constructor=ProgramExecutionError;function ProgramFeatureNotImplemented(progname,feature,message){this.name="ProgramFeatureNotImplemented";this.progname=progname;this.feature=feature;this.message=message}ProgramFeatureNotImplemented.prototype=new Error;ProgramFeatureNotImplemented.prototype.constructor=ProgramFeatureNotImplemented},{"os/process_state":4,"utils/object_utils":25}],15:[function(_dereq_,module,exports){"use strict";var sprintf=_dereq_("utils/sprintf");var ob_utils=_dereq_("utils/object_utils");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramSeq;function ProgramSeq(){this.name="ProgramSeq";this.program_name="seq";this.first=1;this.last=null;this.increment=1;this.format="%f";this.separator="\n";this.equal_width=false}ProgramSeq.prototype=new ProgramBase;ProgramSeq.prototype.constructor=ProgramSeq;ProgramSeq.prototype.parse_command_line=function(){var parser=new PosixGetOpt(":f:(format)s:(separator)w(equal-width)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"f":this.format=option.optarg;break;case"s":this.separator=option.optarg;break;case"w":this.equal_width=true;break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}var extra_params=this.argv.length-parser.optind();switch(extra_params){case 0:this.error_invalid_argument("missing operand");case 1:this.last=this.argv[parser.optind()];break;case 2:this.first=this.argv[parser.optind()];this.last=this.argv[parser.optind()+1];break;case 3:this.first=this.argv[parser.optind()];this.increment=this.argv[parser.optind()+1];this.last=this.argv[parser.optind()+2];break;default:this.error_invalid_argument("extra operand: '"+this.argv[parser.optind()+3]+"'")}var tmp=[this.first,this.increment,this.last];for(var i in tmp){var value=tmp[i];if(!ob_utils.IsStrictFloatValue(value))this.error_invalid_argument("invalid floating point argument: "+tmp[i])}this.first=parseFloat(this.first);this.increment=parseFloat(this.increment);this.last=parseFloat(this.last);if(this.equal_width&&this.format!=="%f")this.error_invalid_argument(" format string may not be specified when printing equal width strings");if(this.equal_width){var max=Math.max(this.first,this.last);var digits=Math.round(Math.log(max)/Math.log(10))+1;this.format="%0"+digits+"f"}};ProgramSeq.prototype.internal_run=function(){this.parse_command_line();if(this.separator==="\n"){for(var i=this.first;this.increment>=0&&i<=this.last||this.increment<0&&i>=this.last;i=i+this.increment){var value=sprintf.sprintf(this.format,i);this.runtime.stdout.put_line(value)}}else{var result=[];for(var i=this.first;this.increment>=0&&i<=this.last||this.increment<0&&i>=this.last;i=i+this.increment){var value=sprintf.sprintf(this.format,i);result.push(value)}this.runtime.stdout.put_line(result.join(this.separator))}return 0}},{"programs/program_base":14,"utils/object_utils":25,"utils/posix-getopt":27,"utils/sprintf":28}],16:[function(_dereq_,module,exports){"use strict";var sprintf=_dereq_("utils/sprintf");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");var ShellExecutor=_dereq_("shell/shell_executor2");var posix_shell_parser=_dereq_("shell/posix_shell_parser.js");module.exports=ProgramShell;function ProgramShell(){this.name="ProgramShell";this.program_name="sh";this.command_or_script="";this.external_programs={}}ProgramShell.prototype=new ProgramBase;ProgramShell.prototype.constructor=ProgramShell;ProgramShell.prototype.add_external_program=function(progname,prog_function){this.external_programs[progname]=prog_function};ProgramShell.prototype.parse_command_line=function(){if(this.argv.length<2)this.error_invalid_argument("missing arguments (expecting -c CMD)");if(this.argv[0]!=="-c")this.error_invalid_argument("invalid 1st argument, expecting -c");this.command_or_script=this.argv[1];if(this.argv.length>2)this.error_invalid_argument("too many arguments (expecting -c CMD)")};ProgramShell.prototype.internal_run=function(){var exit_code=0;this.parse_command_line();try{var shell_parse_tree=posix_shell_parser.parse(this.command_or_script);var exec=new ShellExecutor(this.runtime,this.external_programs);exit_code=exec.ExecuteCommand(shell_parse_tree)}catch(e){if(e instanceof posix_shell_parser.SyntaxError){this.exit_error("Syntax Error: "+e.message)}else{throw e}}return exit_code}},{"os/filesystem":2,"programs/program_base":14,"shell/posix_shell_parser.js":21,"shell/shell_executor2":24,"utils/posix-getopt":27,"utils/sprintf":28}],17:[function(_dereq_,module,exports){"use strict";var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramTac;function ProgramTac(){this.name="ProgramTac";this.program_name="tac";this.files=[]}ProgramTac.prototype=new ProgramBase;ProgramTac.prototype.constructor=ProgramTac;ProgramTac.prototype.parse_command_line=function(){var parser=new PosixGetOpt(":b(before)r(regex)s:(separator)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"b":this.error_not_implemented_feature("-b/--before","not implemented in Agnostic");break;case"r":this.error_not_implemented_feature("-r/--regex","not implemented in Agnostic");break;case"s":this.error_not_implemented_feature("-s/--separator","not implemented in Agnostic");break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}var args=this.argv.slice(parser.optind());if(args.length===0)args.push("-");this.files=args};ProgramTac.prototype.tac_content=function(content){content.reverse();this.runtime.stdout.put_lines(content)};ProgramTac.prototype.tac_stdin=function(){var content=this.runtime.stdin.get_all_lines();this.tac_content(content)};ProgramTac.prototype.tac_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}var content=fl.get_all_lines();this.tac_content(content)};ProgramTac.prototype.internal_run=function(){this.parse_command_line();for(var i in this.files){var filename=this.files[i];if(filename==="-")this.tac_stdin();else this.tac_file(filename)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/posix-getopt":27}],18:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var sprintf=_dereq_("utils/sprintf");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramTail;function ProgramTail(){this.name="ProgramTail";this.program_name="tail";this.verbose=false;this.quiet=false;this.lines="10";this.files=[]}ProgramTail.prototype=new ProgramBase;ProgramTail.prototype.constructor=ProgramTail;ProgramTail.prototype.parse_command_line=function(){var parser=new PosixGetOpt(":1234567890c:(bytes)n:(lines)q(quiet)v(verbose)ဂ(silent)က(help)ခ(version)f:(follow)Fဃ:(pid)င(retry)s:(sleep-interval)စ:(max-unchanged-stats)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lines=parseInt(option.option,10);break;case"c":this.error_not_implemented_feature("-c/--bytes","tail with bytes is not implemented");break;case"n":this.lines=option.optarg;break;case"q":this.quiet=true;break;case"v":this.verbose=true;break;case"ဂ":this.quiet=true;break;case"က":this.show_help();break;case"ခ":this.show_version();break;case"f":this.error_not_implemented_feature("-f/--follow","tail -f  is not implemented");case"F":this.error_not_implemented_feature("-F","tail -F  is not implemented");case"ဃ":this.error_not_implemented_feature("--pid","tail --pid  is not implemented");case"s":this.error_not_implemented_feature("-s/--sleep-interval","tail --sleep-interval  is not implemented");case"င":this.error_not_implemented_feature("--retry","tail --retry is not implemented");case"စ":this.error_not_implemented_feature("--max-unchanged-stats","tail --max-unchanged-stats is not implemented");default:this.error_invalid_argument(option.errmsg)}}var args=this.argv.slice(parser.optind());if(args.length===0)args.push("-");this.files=args;if(args.length>1&&!this.quiet&&!this.verbose)this.verbose=true;var multiplier=1;if(/b$/.test(this.lines))multiplier=512;if(/kB$/.test(this.lines))multiplier=1e3;if(/K$/.test(this.lines))multiplier=1024;if(/MB$/.test(this.lines))multiplier=1e3*1e3;if(/M$/.test(this.lines))multiplier=1024*1024;if(/GB$/.test(this.lines))multiplier=1e3*1e3*1e3;if(/G$/.test(this.lines))multiplier=1024*1024*1024;this.lines=this.lines.replace(/(b|kB|K|MB|M|GB|G)$/,"");var relative_to=-1;if(/^[ \t]*\+/.test(this.lines))relative_to=1;this.lines=this.lines.replace(/^[ \t]*[\-\+]/,"");if(!ob_utils.IsStrictDecimalIntegerValue(this.lines))this.error_invalid_argument(this.lines+": invalid number of lines");this.lines=parseInt(this.lines)*multiplier*relative_to};ProgramTail.prototype.tail_content=function(content){if(this.lines>0){if(content.length<this.lines)return;content=content.slice(this.lines-1)}else{content=content.slice(this.lines)}this.runtime.stdout.put_lines(content)};ProgramTail.prototype.tail_stdin=function(){if(this.verbose)this.runtime.stdout.put_line("==> standard input <==");if(this.lines===0)return;var content=this.runtime.stdin.get_all_lines();this.tail_content(content)};ProgramTail.prototype.tail_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}if(this.verbose)this.runtime.stdout.put_line("==> "+filename+" <==");if(this.lines===0)return;var content=fl.get_all_lines();this.tail_content(content)};ProgramTail.prototype.internal_run=function(){this.parse_command_line();for(var i in this.files){var filename=this.files[i];if(filename==="-")this.tail_stdin();else this.tail_file(filename)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/object_utils":25,"utils/posix-getopt":27,"utils/sprintf":28}],19:[function(_dereq_,module,exports){"use strict";var ProgramBase=_dereq_("programs/program_base");module.exports=ProgramTrue;function ProgramTrue(){this.name="ProgramTrue";this.program_name="true"}ProgramTrue.prototype=new ProgramBase;ProgramTrue.prototype.constructor=ProgramTrue;ProgramTrue.prototype.internal_run=function(){return 0}},{"programs/program_base":14}],20:[function(_dereq_,module,exports){"use strict";var sprintf=_dereq_("utils/sprintf");var str_utils=_dereq_("utils/string_utils");var PosixGetOpt=_dereq_("utils/posix-getopt");var ProgramBase=_dereq_("programs/program_base");var Filesystem=_dereq_("os/filesystem");module.exports=ProgramWc;function ProgramWc(){this.name="ProgramWc";this.program_name="wc";this.files=[];this.count_lines=false;this.count_bytes=false;this.count_chars=false;this.count_words=false;this.count_max_line_length=false;this.show_file_names=false;this.show_totals=false;this.total_lines=0;this.total_bytes=0;this.total_chars=0;this.total_words=0;this.global_max_line_length=0}ProgramWc.prototype=new ProgramBase;ProgramWc.prototype.constructor=ProgramWc;ProgramWc.prototype.parse_command_line=function(){var parser=new PosixGetOpt(":c(bytes)m(chars)l(lines)L(max-line-length)w(words)ဂ:(files0-from)က(help)ခ(version)",this.argv);var option;while((option=parser.getopt())!==undefined){switch(option.option){case"c":this.count_bytes=true;break;case"m":this.count_chars=true;break;case"l":this.count_lines=true;break;case"L":this.count_max_line_length=true;break;case"w":this.count_words=true;break;case"ဂ":this.error_not_implemented_feature("--files0-from","not implemented in Agnostic");break;case"က":this.show_help();break;case"ခ":this.show_version();break;default:this.error_invalid_argument(option.errmsg)}}if(!(this.count_bytes||this.count_chars||this.count_lines||this.count_words||this.count_max_line_length)){this.count_bytes=true;this.count_words=true;this.count_lines=true}var args=this.argv.slice(parser.optind());if(args.length===0){args.push("-")}else{this.show_file_names=true}this.files=args;if(args.length>1)this.show_totals=true};ProgramWc.prototype.wc_content=function(filename,content){var _lines=content.length;var _bytes=0;var _chars=0;var _words=0;var _max_line_length=0;for(var i in content){var line=content[i];_bytes+=line.length+1;_chars+=line.length+1;if(line.length>_max_line_length)_max_line_length=line.length;_words+=str_utils.trimWhitespace(line).split(/[ \t]+/).length}var output=[];if(this.count_lines)output.push(_lines);if(this.count_words)output.push(_words);if(this.count_bytes)output.push(_bytes);if(this.count_chars)output.push(_chars);if(this.count_max_line_length)output.push(_max_line_length);if(this.show_file_names)output.push(filename);var text=output.join(" ");this.runtime.stdout.put_line(text);this.total_bytes+=_bytes;this.total_chars+=_chars;this.total_words+=_words;this.total_lines+=_lines;if(_max_line_length>this.global_max_line_length)this.global_max_line_length=_max_line_length};ProgramWc.prototype.wc_stdin=function(){var content=this.runtime.stdin.get_all_lines();this.wc_content("-",content)};ProgramWc.prototype.wc_file=function(filename){var fl={};try{fl=this.runtime.FS().openfile(filename,false)}catch(e){if(e instanceof this.runtime.FS().exception){this.exit_error(e.toString())}else{throw e}}var content=fl.get_all_lines();this.wc_content(filename,content)};ProgramWc.prototype.internal_run=function(){this.parse_command_line();this.total_lines=0;this.total_bytes=0;this.total_chars=0;this.total_words=0;this.global_max_line_length=0;for(var i in this.files){var filename=this.files[i];if(filename==="-")this.wc_stdin();else this.wc_file(filename)}if(this.show_totals){var output=[];if(this.count_lines)output.push(this.total_lines);if(this.count_words)output.push(this.total_words);if(this.count_bytes)output.push(this.total_bytes);if(this.count_chars)output.push(this.total_chars);if(this.count_max_line_length)output.push(this.global_max_line_length);output.push("total");var text=output.join(" ");this.runtime.stdout.put_line(text)}return 0}},{"os/filesystem":2,"programs/program_base":14,"utils/posix-getopt":27,"utils/sprintf":28,"utils/string_utils":29}],21:[function(_dereq_,module,exports){module.exports=function(){function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function SyntaxError(message,expected,found,offset,line,column){this.message=message;this.expected=expected;this.found=found;this.offset=offset;this.line=line;this.column=column;this.name="SyntaxError"}peg$subclass(SyntaxError,Error);function parse(input){var options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=peg$FAILED,peg$c1=[],peg$c2=function(first,rest){parser_debug("Tokens_Command, text ='"+text()+"' offset = "+offset());var results=first;rest.forEach(function(item){var delim=item[0];var tokens=item[1];results.push(delim);results=results.concat(tokens)});return results},peg$c3=/^[^|&;<>()$`'\\"'\n]/,peg$c4={type:"class",value:"[^|&;<>()$`'\\\\\"'\\n]",description:"[^|&;<>()$`'\\\\\"'\\n]"},peg$c5=function(value){return{literal:value.join("")}},peg$c6=void 0,peg$c7=function(items){return items},peg$c8=/^[^|&;`<>{}()$\\" \t'\n]/,peg$c9={type:"class",value:"[^|&;`<>{}()$\\\\\" \\t'\\n]",description:"[^|&;`<>{}()$\\\\\" \\t'\\n]"},peg$c10=/^[^}$'\\"\n]/,peg$c11={type:"class",value:"[^}$'\\\\\"\\n]",description:"[^}$'\\\\\"\\n]"},peg$c12=/^[^$"\n]/,peg$c13={type:"class",value:'[^$"\\n]',description:'[^$"\\n]'},peg$c14=/^[0-9]/,peg$c15={type:"class",value:"[0-9]",description:"[0-9]"},peg$c16=/^[<>]/,peg$c17={type:"class",value:"[<>]",description:"[<>]"},peg$c18="'",peg$c19={type:"literal",value:"'",description:'"\'"'},peg$c20=function(value){return{singlequotedstring:value.join("")}},peg$c21="\\",peg$c22={type:"literal",value:"\\",description:'"\\\\"'},peg$c23={type:"any",description:"any character"},peg$c24=function(value){return value},peg$c25='"',peg$c26={type:"literal",value:'"',description:'"\\""'},peg$c27=function(value){return{doublequotedstring:value}},peg$c28=function(value){return{literal:"\\"+value}},peg$c29="\n",peg$c30={type:"literal",value:"\n",description:'"\\n"'},peg$c31=/^[\n\t ]/,peg$c32={type:"class",value:"[\\n\\t ]",description:"[\\n\\t ]"},peg$c33=function(){return{delimiter:null}},peg$c34=/^[A-Za-z_]/,peg$c35={type:"class",value:"[A-Za-z_]",description:"[A-Za-z_]"},peg$c36=/^[A-Za-z0-9_]/,peg$c37={type:"class",value:"[A-Za-z0-9_]",description:"[A-Za-z0-9_]"},peg$c38=function(){return text()},peg$c39=function(){return parseInt(text())},peg$c40=null,peg$c41="<",peg$c42={type:"literal",value:"<",description:'"<"'},peg$c43=function(fd,file_name){if(fd===null)fd=0;return{redirection:{type:"input_file",filename:file_name,filedescriptor:fd}}},peg$c44=">",peg$c45={type:"literal",value:">",description:'">"'},peg$c46="|",peg$c47={type:"literal",value:"|",description:'"|"'},peg$c48=function(fd,forceclobber,file_name){if(fd===null)fd=1;return{redirection:{type:"output_file",filename:file_name,forceclobber:forceclobber!==null,filedescriptor:fd}}},peg$c49=">>",peg$c50={type:"literal",value:">>",description:'">>"'},peg$c51=function(fd,file_name){if(fd===null)fd=1;return{redirection:{type:"append_file",filename:file_name,filedescriptor:fd}}},peg$c52="<<",peg$c53={type:"literal",value:"<<",description:'"<<"'},peg$c54=function(fd){error("Here-Documents (<< operators) are not supported in this program")},peg$c55="-",peg$c56={type:"literal",value:"-",description:'"-"'},peg$c57="<&",peg$c58={type:"literal",value:"<&",description:'"<&"'},peg$c59=function(fd,file_name){if(fd===null)fd=0;return{redirection:{type:"input_dup_fd",filename:file_name[0],filedescriptor:fd}}},peg$c60=">&",peg$c61={type:"literal",value:">&",description:'">&"'},peg$c62=function(fd,file_name){if(fd===null)fd=1;return{redirection:{type:"output_dup_fd",filename:file_name[0],filedescriptor:fd}}},peg$c63="<>",peg$c64={type:"literal",value:"<>",description:'"<>"'},peg$c65=function(fd,file_name){if(fd===null)fd=0;return{redirection:{type:"inout_file",filename:file_name,filedescriptor:fd}}},peg$c66=function(item){parser_debug("Redirection, text ='"+text()+"' offset = "+offset());return item},peg$c67="=",peg$c68={type:"literal",value:"=",description:'"="'},peg$c69=function(vari_name,value){parser_debug("Assignments, text ='"+text()+"' offset = "+offset());var tmp={};tmp[vari_name]=value;return{assignment:tmp}},peg$c70=function(first,rest){parser_debug("Assignments_or_Redirections, text ='"+text()+"' offset = "+offset());return Array.prototype.concat.apply(first,rest)},peg$c71=function(first,rest){parser_debug("Redirections, text ='"+text()+"' offset = "+offset());return Array.prototype.concat.apply(first,rest)},peg$c72=function(prefix,cmd,suffix){parser_debug("SimpleCommand(form1), text ='"+text()+"' offset = "+offset());return pack_simple_command(prefix,cmd,suffix)},peg$c73=function(prefix,cmd){parser_debug("SimpleCommand(form2), text ='"+text()+"' offset = "+offset());return pack_simple_command(prefix,cmd,[])},peg$c74=function(prefix){parser_debug("SimpleCommand(form3), text ='"+text()+"' offset = "+offset());return pack_simple_command(prefix,null,[])},peg$c75=function(cmd,suffix){parser_debug("SimpleCommand(form4), text ='"+text()+"' offset = "+offset());return pack_simple_command([],cmd,suffix)},peg$c76=function(cmd){parser_debug("SimpleCommand(form5), text ='"+text()+"' offset = "+offset());return pack_simple_command([],cmd,[])},peg$c77="(",peg$c78={type:"literal",value:"(",description:'"("'},peg$c79=")",peg$c80={type:"literal",value:")",description:'")"'},peg$c81=function(cmd){return{compound_subshell:cmd}},peg$c82="{",peg$c83={type:"literal",value:"{",description:'"{"'},peg$c84="}",peg$c85={type:"literal",value:"}",description:'"}"'},peg$c86=function(cmd){return{compound_currentshell:cmd}},peg$c87=function(cmd){return cmd},peg$c88="||",peg$c89={type:"literal",value:"||",description:'"||"'},peg$c90=function(first,rest){parser_debug("Pipeline, text ='"+text()+"' offset = "+offset());if(rest.length===0)return first;if(first===null)error("expected valid command before |");var steps=[];steps.push(first);for(var i in rest){if(rest[i][2]===null)error("expected valid command after |");steps.push(rest[i][2])}return{pipeline:steps}},peg$c91="&&",peg$c92={type:"literal",value:"&&",description:'"&&"'},peg$c93=function(first,rest){parser_debug("AndOrList, text = '"+text()+"'");if(rest.length===0)return first;if(first===null)error("expected valid command before &&,||");var and_or_list=[];and_or_list.push(first);for(var i in rest){and_or_list.push(rest[i][0]);if(rest[i][1]===null)error("expected valid command before &&,||");and_or_list.push(rest[i][1])}return{and_or_list:and_or_list}},peg$c94=";",peg$c95={type:"literal",value:";",description:'";"'},peg$c96="&",peg$c97={type:"literal",value:"&",description:'"&"'},peg$c98=function(first,rest,last_op){parser_debug("List, text = '"+text()+"'");if(rest.length===0&&(last_op===null||last_op===";"))return first;var current_cmd=first;var steps=[];for(var i in rest){var op=rest[i][0];var next_cmd=rest[i][1];if(current_cmd===null)error("expected valid command before ';','&'");if(op==";"){steps.push({foreground:current_cmd})}else{steps.push({background:current_cmd})}current_cmd=next_cmd}if(current_cmd!==null){if(last_op===null||last_op===";")steps.push({foreground:current_cmd});else steps.push({background:current_cmd})}return{list:steps}},peg$c99=function(items){parser_debug("TerminatedList, text = '"+text()+"'");var steps=[];for(var i in items){var cmd=items[i][0];var op=items[i][1];if(op==";"){steps.push({foreground:cmd})}else{steps.push({background:cmd})}}return{list:steps}},peg$c100="$(",peg$c101={type:"literal",value:"$(",description:'"$("'},peg$c102=function(){return{subshell:null}},peg$c103=function(term){return{subshell:term}},peg$c104="`",peg$c105={type:"literal",value:"`",description:'"`"'},peg$c106=function(terms){return{backtickshell:terms}},peg$c107="${",peg$c108={type:"literal",value:"${",description:'"${"'},peg$c109=function(varname){return{envvar:varname}},peg$c110="$",peg$c111={type:"literal",value:"$",description:'"$"'},peg$c112="",peg$c113=function(varname,varop,opvalue){return{envvar_operation:{envvar:varname,operation:varop,value:opvalue?opvalue[0]:[]}}},peg$c114=/^[@*#?\-$!\0]/,peg$c115={type:"class",value:"[@*#?\\-$!\\0]",description:"[@*#?\\-$!\\0]"},peg$c116=":-",peg$c117={type:"literal",value:":-",description:'":-"'},peg$c118=":=",peg$c119={type:"literal",value:":=",description:'":="'},peg$c120=":?",peg$c121={type:"literal",value:":?",description:'":?"'},peg$c122="?",peg$c123={type:"literal",value:"?",description:'"?"'},peg$c124=":+",peg$c125={type:"literal",value:":+",description:'":+"'},peg$c126="+",peg$c127={type:"literal",value:"+",description:'"+"'},peg$c128="%",peg$c129={type:"literal",value:"%",description:'"%"'},peg$c130="%%",peg$c131={type:"literal",value:"%%",description:'"%%"'},peg$c132="#",peg$c133={type:"literal",value:"#",description:'"#"'},peg$c134="##",peg$c135={type:"literal",value:"##",description:'"##"'},peg$c136="$((",peg$c137={type:"literal",value:"$((",description:'"$(("'},peg$c138="))",peg$c139={type:"literal",value:"))",description:'"))"'},peg$c140=function(expr){return{arithmetic:expr}},peg$c141=function(first,rest){if(rest.length===0)return first;var list=[];list.push(first);for(var i in rest){list.push(rest[i][1]);list.push(rest[i][3])}return{arithmetics_op_list:list}},peg$c142="*",peg$c143={type:"literal",value:"*",description:'"*"'},peg$c144="/",peg$c145={type:"literal",value:"/",description:'"/"'},peg$c146=function(first,rest){if(rest.length===0)return first;var list=[];list.push(first);for(var i in rest){list.push(rest[i][1]);list.push(rest[i][3])}return{arithmetics_op_list:list}},peg$c147=function(expr){return expr},peg$c148=function(value){return{literal:value}},peg$c149=function(){return{envvar:text()}},peg$c150=/^[1-9]/,peg$c151={type:"class",value:"[1-9]",description:"[1-9]"},peg$c152=function(){return parseInt(text(),10)},peg$c153="0x",peg$c154={type:"literal",value:"0x",description:'"0x"'},peg$c155=/^[A-Fa-f0-9]/,peg$c156={type:"class",value:"[A-Fa-f0-9]",description:"[A-Fa-f0-9]"},peg$c157=function(hexvalue){return parseInt(text(),16)},peg$c158="0",peg$c159={type:"literal",value:"0",description:'"0"'},peg$c160=/^[0-7]/,peg$c161={type:"class",value:"[0-7]",description:"[0-7]"},peg$c162=function(){return parseInt(text(),8)},peg$c163=/^[ \t]/,peg$c164={type:"class",value:"[ \\t]",description:"[ \\t]"},peg$currPos=0,peg$reportedPos=0,peg$cachedPos=0,peg$cachedPosDetails={line:1,column:1,seenCR:false},peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$reportedPos,peg$currPos)}function offset(){return peg$reportedPos}function line(){return peg$computePosDetails(peg$reportedPos).line}function column(){return peg$computePosDetails(peg$reportedPos).column}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],peg$reportedPos)}function error(message){throw peg$buildException(message,null,peg$reportedPos)}function peg$computePosDetails(pos){function advance(details,startPos,endPos){var p,ch;for(p=startPos;p<endPos;p++){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}}}if(peg$cachedPos!==pos){if(peg$cachedPos>pos){peg$cachedPos=0;peg$cachedPosDetails={line:1,column:1,seenCR:false}}advance(peg$cachedPosDetails,peg$cachedPos,pos);peg$cachedPos=pos}return peg$cachedPosDetails}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,pos){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0180-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1080-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}var posDetails=peg$computePosDetails(pos),found=pos<input.length?input.charAt(pos):null;if(expected!==null){cleanupExpected(expected)}return new SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,pos,posDetails.line,posDetails.column)}function peg$parsestart(){var s0;s0=peg$parseList();return s0}function peg$parseTokens_Command(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseToken_NoDelimiter();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parseEmptyDelimiter();if(s4!==peg$FAILED){s5=peg$parseToken_NoDelimiter();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parseEmptyDelimiter();if(s4!==peg$FAILED){s5=peg$parseToken_NoDelimiter();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c2(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseNon_Operator_UnquotedCharacters(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c3.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;
if(peg$silentFails===0){peg$fail(peg$c4)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c3.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c4)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c5(s1)}s0=s1;return s0}function peg$parseToken_NoDelimiter(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseredirection_word_hack();peg$silentFails--;if(s2===peg$FAILED){s1=peg$c6}else{peg$currPos=s1;s1=peg$c0}if(s1!==peg$FAILED){s2=[];s3=peg$parseNoDelimiter_UnquotedCharacters();if(s3===peg$FAILED){s3=peg$parseAllContexts_Tokens()}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseNoDelimiter_UnquotedCharacters();if(s3===peg$FAILED){s3=peg$parseAllContexts_Tokens()}}}else{s2=peg$c0}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c7(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseNoDelimiter_UnquotedCharacters(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c8.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c8.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c5(s1)}s0=s1;return s0}function peg$parseToken_NoBraces(){var s0,s1;s0=[];s1=peg$parseNoBraces_UnquotedCharacters();if(s1===peg$FAILED){s1=peg$parseAllContexts_Tokens()}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseNoBraces_UnquotedCharacters();if(s1===peg$FAILED){s1=peg$parseAllContexts_Tokens()}}}else{s0=peg$c0}return s0}function peg$parseNoBraces_UnquotedCharacters(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c10.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c10.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c5(s1)}s0=s1;return s0}function peg$parseNoDoubleQuotes_UnquotedCharacters(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c12.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c12.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c5(s1)}s0=s1;return s0}function peg$parseAllContexts_Tokens(){var s0;s0=peg$parseSingleQuotedString();if(s0===peg$FAILED){s0=peg$parseDoubleQuotedString();if(s0===peg$FAILED){s0=peg$parseEscapedCharacter();if(s0===peg$FAILED){s0=peg$parseExpandable()}}}return s0}function peg$parseredirection_word_hack(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c14.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c14.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){if(peg$c16.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseSingleQuotedString(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s1=peg$c18;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSingleQuotedStringCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSingleQuotedStringCharacter()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===39){s3=peg$c18;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c20(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseSingleQuotedStringCharacter(){var s0,s1,s2;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===39){s2=peg$c18;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s2=peg$c21;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s2===peg$FAILED){s2=peg$parseLineTerminator()}}peg$silentFails--;if(s2===peg$FAILED){s1=peg$c6}else{peg$currPos=s1;s1=peg$c0}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23)}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c24(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$parseEscapedCharacter()}return s0}function peg$parseDoubleQuotedString(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c25;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseNoDoubleQuotes_UnquotedCharacters();if(s3===peg$FAILED){s3=peg$parseEscapedCharacter();if(s3===peg$FAILED){s3=peg$parseExpandable()}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseNoDoubleQuotes_UnquotedCharacters();if(s3===peg$FAILED){s3=peg$parseEscapedCharacter();if(s3===peg$FAILED){s3=peg$parseExpandable()}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c25;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c27(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseEscapedCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c21;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23)}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c28(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseLineTerminator(){var s0;if(input.charCodeAt(peg$currPos)===10){s0=peg$c29;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}return s0}function peg$parseEmptyDelimiter(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c31.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c31.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c33()}s0=s1;return s0}function peg$parseVariableName(){var s0,s1,s2,s3;s0=peg$currPos;if(peg$c34.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s1!==peg$FAILED){s2=[];if(peg$c36.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c36.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c38();s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseRedirectionFileDescriptor(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c14.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c14.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c39()}s0=s1;return s0}function peg$parseInputRedirection(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s2=peg$c41;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}if(s2!==peg$FAILED){s3=peg$parseToken_NoDelimiter();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c43(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseOutputRedirection(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s2=peg$c44;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===124){s3=peg$c46;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s3===peg$FAILED){s3=peg$c40}if(s3!==peg$FAILED){s4=peg$parseToken_NoDelimiter();if(s4!==peg$FAILED){peg$reportedPos=s0;s1=peg$c48(s1,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseAppendRedirection(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c49){s2=peg$c49;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s2!==peg$FAILED){s3=peg$parseToken_NoDelimiter();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c51(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseHereDocRedirection(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c52){s2=peg$c52;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c53)}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c54(s1);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseFileDescriptorOrMinus(){var s0,s1;s0=[];if(peg$c14.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c14.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}}else{s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c55;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c38()}s0=s1}return s0}function peg$parseDupInputRedirection(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c57){s2=peg$c57;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s2!==peg$FAILED){s3=peg$parseFileDescriptorOrMinus();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c59(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseDupOutputRedirection(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c60){s2=peg$c60;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s2!==peg$FAILED){s3=peg$parseFileDescriptorOrMinus();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c62(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseInOutRedirection(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseRedirectionFileDescriptor();if(s1===peg$FAILED){s1=peg$c40}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c63){s2=peg$c63;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c64)}}if(s2!==peg$FAILED){s3=peg$parseToken_NoDelimiter();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c65(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseRedirection(){var s0,s1;s0=peg$currPos;s1=peg$parseInputRedirection();if(s1===peg$FAILED){s1=peg$parseOutputRedirection();if(s1===peg$FAILED){s1=peg$parseAppendRedirection();if(s1===peg$FAILED){s1=peg$parseHereDocRedirection();if(s1===peg$FAILED){s1=peg$parseDupInputRedirection();if(s1===peg$FAILED){s1=peg$parseDupOutputRedirection();if(s1===peg$FAILED){s1=peg$parseInOutRedirection()}}}}}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c66(s1)}s0=s1;return s0}function peg$parseAssignment(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseVariableName();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s2=peg$c67;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s2!==peg$FAILED){s3=peg$parseToken_NoDelimiter();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c69(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseAssignments_Or_Redirections(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseAssignment();if(s1===peg$FAILED){s1=peg$parseRedirection()}if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();if(s5!==peg$FAILED){while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}}else{s4=peg$c0}if(s4!==peg$FAILED){s5=peg$parseAssignment();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}if(s3===peg$FAILED){s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){s5=peg$parseRedirection();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();if(s5!==peg$FAILED){while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}}else{s4=peg$c0}if(s4!==peg$FAILED){s5=peg$parseAssignment();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}if(s3===peg$FAILED){s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){s5=peg$parseRedirection();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c70(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseRedirections(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseRedirection();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){s5=peg$parseRedirection();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){s5=peg$parseRedirection();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c71(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseSimpleCommand(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseAssignments_Or_Redirections();if(s1!==peg$FAILED){s2=[];s3=peg$parseEmptyDelimiter();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseEmptyDelimiter()}}else{s2=peg$c0}if(s2!==peg$FAILED){s3=peg$parseTokens_Command();if(s3!==peg$FAILED){s4=[];s5=peg$parseEmptyDelimiter();if(s5!==peg$FAILED){while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}}else{s4=peg$c0}if(s4!==peg$FAILED){s5=peg$parseRedirections();if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c72(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseAssignments_Or_Redirections();if(s1!==peg$FAILED){s2=[];s3=peg$parseEmptyDelimiter();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseEmptyDelimiter()}}else{s2=peg$c0}if(s2!==peg$FAILED){s3=peg$parseTokens_Command();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c73(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseAssignments_Or_Redirections();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c74(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseTokens_Command();if(s1!==peg$FAILED){s2=[];s3=peg$parseEmptyDelimiter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseEmptyDelimiter()}if(s2!==peg$FAILED){s3=peg$parseRedirections();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c75(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseTokens_Command();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c76(s1)}s0=s1}}}}return s0}function peg$parseCompound_Command_Subshell(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c77;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseEmptyDelimiter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseEmptyDelimiter()}if(s2!==peg$FAILED){s3=peg$parseList();if(s3!==peg$FAILED){s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c79;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c81(s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseCompound_Command_Currentshell(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c82;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c83)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseEmptyDelimiter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseEmptyDelimiter()}if(s2!==peg$FAILED){s3=peg$parseTerminatedList();if(s3!==peg$FAILED){s4=[];s5=peg$parseEmptyDelimiter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseEmptyDelimiter()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c84;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c85)}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseCommand(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseEmptyDelimiter();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseEmptyDelimiter()}if(s1!==peg$FAILED){s2=peg$parseSimpleCommand();if(s2===peg$FAILED){s2=peg$parseCompound_Command_Subshell();if(s2===peg$FAILED){s2=peg$parseCompound_Command_Currentshell()}}if(s2!==peg$FAILED){s3=[];s4=peg$parseEmptyDelimiter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseEmptyDelimiter()}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c87(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parsePipeline(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseCommand();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c88){s5=peg$c88;peg$currPos+=2}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}peg$silentFails--;if(s5===peg$FAILED){s4=peg$c6}else{peg$currPos=s4;s4=peg$c0}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===124){s5=peg$c46;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s5!==peg$FAILED){s6=peg$parseCommand();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c88){s5=peg$c88;peg$currPos+=2}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}peg$silentFails--;if(s5===peg$FAILED){s4=peg$c6}else{peg$currPos=s4;s4=peg$c0}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===124){s5=peg$c46;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s5!==peg$FAILED){s6=peg$parseCommand();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c90(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseAndOrList(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsePipeline();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;if(input.substr(peg$currPos,2)===peg$c91){s4=peg$c91;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s4===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c88){s4=peg$c88;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}}if(s4!==peg$FAILED){s5=peg$parsePipeline();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;if(input.substr(peg$currPos,2)===peg$c91){s4=peg$c91;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s4===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c88){s4=peg$c88;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}}if(s4!==peg$FAILED){s5=peg$parsePipeline();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c93(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseList(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseAndOrList();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;if(input.charCodeAt(peg$currPos)===59){s4=peg$c94;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c95)}}if(s4===peg$FAILED){if(input.charCodeAt(peg$currPos)===38){s4=peg$c96;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}}if(s4!==peg$FAILED){s5=peg$parseAndOrList();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;if(input.charCodeAt(peg$currPos)===59){s4=peg$c94;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c95)}}if(s4===peg$FAILED){if(input.charCodeAt(peg$currPos)===38){s4=peg$c96;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}}if(s4!==peg$FAILED){s5=peg$parseAndOrList();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s3=peg$c94;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c95)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===38){s3=peg$c96;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}}if(s3===peg$FAILED){s3=peg$c40}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c98(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseTerminatedList(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$currPos;s3=peg$parseAndOrList();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s4=peg$c94;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c95)}}if(s4===peg$FAILED){if(input.charCodeAt(peg$currPos)===38){s4=peg$c96;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}}if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$c0}}else{peg$currPos=s2;s2=peg$c0}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$currPos;s3=peg$parseAndOrList();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s4=peg$c94;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c95)}}if(s4===peg$FAILED){if(input.charCodeAt(peg$currPos)===38){s4=peg$c96;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}}if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$c0}}else{peg$currPos=s2;s2=peg$c0}}}else{s1=peg$c0}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c99(s1)}s0=s1;return s0}function peg$parseExpandable(){var s0;s0=peg$parseSubshellExpandable();if(s0===peg$FAILED){s0=peg$parseBacktickExpandable();if(s0===peg$FAILED){s0=peg$parseParameterExpandable();if(s0===peg$FAILED){s0=peg$parseParameterOperationExpandable();if(s0===peg$FAILED){s0=peg$parseArithmeticExpandable()}}}}return s0}function peg$parseSubshellExpandable(){var s0,s1,s2,s3,s4;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c100){s1=peg$c100;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c101)}}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===40){s3=peg$c77;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}peg$silentFails--;if(s3===peg$FAILED){s2=peg$c6}else{peg$currPos=s2;s2=peg$c0}if(s2!==peg$FAILED){s3=[];s4=peg$parseEmptyDelimiter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseEmptyDelimiter()}if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s4=peg$c79;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s4!==peg$FAILED){peg$reportedPos=s0;s1=peg$c102();s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c100){s1=peg$c100;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c101)}}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===40){s3=peg$c77;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}peg$silentFails--;if(s3===peg$FAILED){s2=peg$c6}else{peg$currPos=s2;s2=peg$c0}if(s2!==peg$FAILED){s3=peg$parseList();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s4=peg$c79;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s4!==peg$FAILED){peg$reportedPos=s0;s1=peg$c103(s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}return s0}function peg$parseBacktickExpandable(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===96){s1=peg$c104;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105)}}if(s1!==peg$FAILED){s2=peg$parseList();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===96){s3=peg$c104;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105)}}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c106(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseParameterExpandable(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c107){s1=peg$c107;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}if(s1!==peg$FAILED){s2=peg$parseParameterName();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s3=peg$c84;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c85)}}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c109(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===36){s1=peg$c110;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s1!==peg$FAILED){s2=peg$parseParameterName();if(s2!==peg$FAILED){s3=peg$c112;if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c109(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}return s0}function peg$parseParameterOperationExpandable(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c107){s1=peg$c107;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}if(s1!==peg$FAILED){s2=peg$parseParameterName();if(s2!==peg$FAILED){s3=peg$parseParameterExpansionOperator();if(s3!==peg$FAILED){s4=[];s5=peg$parseToken_NoBraces();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseToken_NoBraces()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c84;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c85)}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c113(s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseParameterName(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$currPos;if(peg$c34.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s2!==peg$FAILED){s3=[];if(peg$c36.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c36.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}}if(s3!==peg$FAILED){s2=[s2,s3];s1=s2}else{peg$currPos=s1;s1=peg$c0}}else{peg$currPos=s1;s1=peg$c0}if(s1===peg$FAILED){if(peg$c114.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c115)}}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c38()}s0=s1;return s0}function peg$parseParameterExpansionOperator(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c116){s1=peg$c116;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s1=peg$c55;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c118){s1=peg$c118;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c119)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s1=peg$c67;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c120){s1=peg$c120;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c121)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s1=peg$c122;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c124){s1=peg$c124;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s1=peg$c126;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)
}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===37){s1=peg$c128;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c129)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c130){s1=peg$c130;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c131)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===35){s1=peg$c132;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c133)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c134){s1=peg$c134;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c135)}}}}}}}}}}}}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c38()}s0=s1;return s0}function peg$parseArithmeticExpandable(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,3)===peg$c136){s1=peg$c136;peg$currPos+=3}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c137)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parseArithmeticExpression();if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c138){s5=peg$c138;peg$currPos+=2}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c139)}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c140(s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseArithmeticExpression(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parseTerm();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s5=peg$c126;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s5=peg$c55;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}}if(s5!==peg$FAILED){s6=peg$parsewhitespace();if(s6!==peg$FAILED){s7=peg$parseTerm();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s5=peg$c126;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s5=peg$c55;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56)}}}if(s5!==peg$FAILED){s6=peg$parsewhitespace();if(s6!==peg$FAILED){s7=peg$parseTerm();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c141(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseTerm(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parseFactor();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s5=peg$c142;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c143)}}if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s5=peg$c144;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c145)}}}if(s5!==peg$FAILED){s6=peg$parsewhitespace();if(s6!==peg$FAILED){s7=peg$parseFactor();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s5=peg$c142;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c143)}}if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s5=peg$c144;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c145)}}}if(s5!==peg$FAILED){s6=peg$parsewhitespace();if(s6!==peg$FAILED){s7=peg$parseFactor();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}else{peg$currPos=s3;s3=peg$c0}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c146(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseFactor(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c77;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parseArithmeticExpression();if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c79;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c147(s3);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseInteger();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c148(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseArithmeticParameterName();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c149()}s0=s1;if(s0===peg$FAILED){s0=peg$parseExpandable()}}}return s0}function peg$parseInteger(){var s0;s0=peg$parseDecimalInteger();if(s0===peg$FAILED){s0=peg$parseHexInteger();if(s0===peg$FAILED){s0=peg$parseOctalInteger()}}return s0}function peg$parseDecimalInteger(){var s0,s1,s2,s3;s0=peg$currPos;if(peg$c150.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c151)}}if(s1!==peg$FAILED){s2=[];if(peg$c14.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c14.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c152();s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseHexInteger(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c153){s1=peg$c153;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c154)}}if(s1!==peg$FAILED){s2=[];if(peg$c155.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c156)}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c155.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c156)}}}}else{s2=peg$c0}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c157(s2);s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseOctalInteger(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===48){s1=peg$c158;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c159)}}if(s1!==peg$FAILED){s2=[];if(peg$c160.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c161)}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c160.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c161)}}}}else{s2=peg$c0}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c162();s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parseArithmeticParameterName(){var s0,s1,s2,s3;s0=peg$currPos;if(peg$c34.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s1!==peg$FAILED){s2=[];if(peg$c36.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c36.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c38();s0=s1}else{peg$currPos=s0;s0=peg$c0}}else{peg$currPos=s0;s0=peg$c0}return s0}function peg$parsewhitespace(){var s0,s1;s0=[];if(peg$c163.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c164)}}while(s1!==peg$FAILED){s0.push(s1);if(peg$c163.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c164)}}}return s0}function parser_debug(){if(0){var text="";for(var i in arguments){text+=arguments[i]+" "}console.warn(text)}}function pack_simple_command(prefix,cmd,suffix){var assignments=[];var redirections=[];for(i in prefix){if(prefix[i]){var tmp=prefix[i];if("assignment"in tmp){assignments.push(tmp["assignment"])}else if("redirection"in tmp){redirections.push(tmp["redirection"])}}}for(i in suffix){if(suffix[i]){var tmp=suffix[i];if("assignment"in tmp){assignments.push(tmp["assignment"])}else if("redirection"in tmp){redirections.push(tmp["redirection"])}}}var command={};if(assignments.length>0)command["assignments"]=assignments;if(redirections.length>0)command["redirections"]=redirections;if(cmd)command["command"]=cmd;return{SimpleCommand:command}}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos)}}return{SyntaxError:SyntaxError,parse:parse}}()},{}],22:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var str_utils=_dereq_("utils/string_utils");module.exports=DescribeHTMLShellCommand;function DescribeHTMLShellCommand(cmd){var s=new Shell_HTML_Descriptor;return s.DescribeShellCommand(cmd)}function Shell_HTML_Descriptor(){var command_order=0;var command_level=0;var command_level_max=0;function replaceAll(find,replace,str){return str.replace(new RegExp(find,"g"),replace)}function StartCommand(obj){command_order=0;command_level=0;command_level_max=0;var html=Command(obj);for(var i=1;i<=command_level_max;i++){var from="cmdleveltmp"+i;var to="cmdlevel"+(command_level_max-i+1);html=replaceAll(from,to,html)}return html}function start_span(class_name,level){var html='<span class="'+class_name;if(level)html+=" cmdleveltmp"+parseInt(level);html+='">';return html}function end_span(){return"</span>"}function simple_span(class_name,content){var html='<span class="'+class_name+'">'+content+"</span>";return html}function Command(obj){var type=ob_utils.GetOneKey(obj);var value=obj[type];var html;command_level++;if(command_level>command_level_max)command_level_max=command_level;switch(type){case"SimpleCommand":html=SimpleCommand(value);break;case"and_or_list":html=AndOrList(value);break;case"list":html=List(value);break;case"pipeline":html=Pipeline(value);break;case"compound_subshell":html=CompoundSubshell(value);break;case"compound_currentshell":html=CompoundCurrentshell(value);break;default:throw"Invalid Command type '"+type+'"'}command_level--;return html}function Pipeline(obj){ob_utils.VerifyArray(obj);var pipe_desc=obj.map(Command).join(" "+simple_span("pipesymbol","|")+" ");return start_span("pipecmd",command_level)+pipe_desc+end_span()}function List(obj){var result="";ob_utils.VerifyArray(obj);obj.forEach(function(item,idx){var exec_type=ob_utils.GetOneKey(item);var exec_char="";switch(exec_type){case"foreground":exec_char=" "+simple_span("list_terminator",";");break;case"background":exec_char=" "+simple_span("list_terminated","&");break;default:throw"Invalid list exec-type '"+exec_type+"', expecting 'foreground' or 'background'"}var command=Command(item[exec_type]);if(idx!=obj.length-1||exec_type=="background")command+=exec_char;result+=command});return start_span("list",command_level)+result+end_span()}function AndOrList(obj){ob_utils.VerifyArray(obj);var cmd=obj[0];var list_desc=start_span("AndOrList",command_level)+Command(cmd);var i=1;while(i<obj.length){var condition=obj[i];var cmd=obj[i+1];i+=2;list_desc=list_desc+" "+simple_span("AndOrListOperator",condition)+" "+Command(cmd)}list_desc+=end_span();return list_desc}function SimpleCommand(obj){ob_utils.VerifyAllowedKeys(obj,["command","redirections","assignments"]);var assignment_desc="";var tokens_desc="";var redirection_desc="";if("assignments"in obj)assignment_desc=simple_span("Assignments",Assignments(obj["assignments"]))+"&nbsp;";if("redirections"in obj)redirection_desc="&nbsp;"+simple_span("Redirections",Redirections(obj["redirections"]));if("command"in obj)tokens_desc=simple_span("ExecTokens",Token(true,obj["command"]));var v=start_span("SimpleCommand",command_level)+assignment_desc+tokens_desc+redirection_desc+end_span();return v}function Assignments(obj){ob_utils.VerifyArray(obj);var results=[];obj.forEach(function(item){var varname=ob_utils.GetOneKey(item);var value_token=item[varname];var value=Token(false,value_token);var desc=varname+"="+value;results.push(desc)});return results.join(" ")}function Redirections(obj){ob_utils.VerifyArray(obj);return""}function Token(allow_multiple_fields,obj){var results=[];ob_utils.VerifyBoolean(allow_multiple_fields);ob_utils.VerifyArray(obj);obj.forEach(function(item){var token_type=ob_utils.GetOneKey(item);var token_value=item[token_type];var desc="";switch(token_type){case"literal":desc=token_value;break;case"delimiter":desc=" ";break;case"singlequotedstring":desc=SingleQuotedString(token_value);break;case"doublequotedstring":desc=DoubleQuotedString(token_value);break;case"envvar_operation":desc=simple_span("EnvVarOp",EnvVarOperation(token_value));break;case"envvar":desc=simple_span("EnvVar",EnvVar(token_value));break;case"arithmetic":desc=simple_span("Arithmetic",Arithmetic(token_value));break;case"subshell":desc=simple_span("subshell",Subshell(token_value));break;case"backtickshell":desc=simple_span("backtickshell",BacktickShell(token_value));break;default:throw"Unknown Posix-Shell-Token '"+token_type+'"'}results.push(desc)});return results.join("")}function EnvVar(obj){return"${"+obj+"}"}function EnvVarOperation(obj){ob_utils.VerifyAllowedKeys(obj,["envvar","operation","value"]);var varname=obj["envvar"];var operation=obj["operation"];var value="";if(obj["value"]){value=Token(true,obj["value"])}return"${"+varname+operation+value+"}"}function SingleQuotedString(obj){return"'"+obj+"'"}function DoubleQuotedString(obj){var desc=Token(true,obj);return'"'+desc+'"'}function Subshell(obj){if(obj===null)return"$()";var desc=Command(obj);return"$("+desc+")"}function BacktickShell(obj){if(obj===null)return"``";var desc=Command(obj);return"`"+desc+"`"}function CompoundSubshell(obj){return start_span("CompoundSubshell",command_level)+" ( "+Command(obj)+" ) "+end_span()}function CompoundCurrentshell(obj){return start_span("CompoundCurrentshell",command_level)+"{"+Command(obj)+" ; }"+end_span()}function Arithmetic(obj){return"$(("+ArithmeticExpression(obj)+"))"}function ArithmeticExpression(obj){var op=ob_utils.GetOneKey(obj);var value=obj[op];switch(op){case"literal":return value;case"envvar":return EnvVar(value);case"arithmetics_op_list":return ArithmeticOpList(value);case"arithmetic":return ArithmeticExpression(value);case"subshell":return Subshell(value);default:throw"Uknown arithmetic operation '"+op+'"'}}function ArithmeticOpList(obj){ob_utils.VerifyArray(obj);var operand=obj[0];var value=ArithmeticExpression(operand);var i=1;while(i<obj.length){var operator=obj[i];var operand2=obj[i+1];i+=2;value=value+operator+ArithmeticExpression(operand2)}return value}return{DescribeShellCommand:StartCommand}}},{"utils/object_utils":25,"utils/string_utils":29}],23:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var str_utils=_dereq_("utils/string_utils");module.exports=DescribeShellCommand;function DescribeShellCommand(cmd){var s=new ShellDescriptor;return s.DescribeShellCommand(cmd)}function ShellDescriptor(){function Command(obj){var type=ob_utils.GetOneKey(obj);var value=obj[type];switch(type){case"SimpleCommand":return SimpleCommand(value);case"and_or_list":return AndOrList(value);case"list":return List(value);case"pipeline":return Pipeline(value);case"compound_subshell":return CompoundSubshell(value);case"compound_currentshell":return CompoundCurrentshell(value);default:throw"Invalid Command type '"+type+'"'}}function Pipeline(obj){ob_utils.VerifyArray(obj);var pipe_desc=obj.map(Command).join(" | ");return pipe_desc}function List(obj){var result="";ob_utils.VerifyArray(obj);obj.forEach(function(item){var exec_type=ob_utils.GetOneKey(item);var exec_char="";switch(exec_type){case"foreground":exec_char=" ;";break;case"background":exec_char+=" &";break;default:throw"Invalid list exec-type '"+exec_type+"', expecting 'foreground' or 'background'"}var command=Command(item[exec_type]);result+=command+exec_char});result=result.replace(/; *$/,"");return result}function AndOrList(obj){ob_utils.VerifyArray(obj);var cmd=obj[0];var list_desc=Command(cmd);var i=1;while(i<obj.length){var condition=obj[i];var cmd=obj[i+1];i+=2;list_desc=list_desc+" "+condition+" "+Command(cmd)}return list_desc}function SimpleCommand(obj){ob_utils.VerifyAllowedKeys(obj,["command","redirections","assignments"]);var assignment_desc="";var tokens_desc="";var redirection_desc="";if("assignments"in obj)assignment_desc=Assignments(obj["assignments"])+" ";if("redirections"in obj)redirection_desc=" "+Redirections(obj["redirections"]);if("command"in obj)tokens_desc=Token(true,obj["command"]);var v=assignment_desc+tokens_desc+redirection_desc;v=str_utils.trimWhitespace(v);return v}function Assignments(obj){ob_utils.VerifyArray(obj);var results=[];obj.forEach(function(item){var varname=ob_utils.GetOneKey(item);var value_token=item[varname];var value=Token(false,value_token);var desc=varname+"="+value;results.push(desc)});return results.join(" ")}function Redirections(obj){ob_utils.VerifyArray(obj);return""}function Token(allow_multiple_fields,obj){var results=[];ob_utils.VerifyBoolean(allow_multiple_fields);ob_utils.VerifyArray(obj);obj.forEach(function(item){var token_type=ob_utils.GetOneKey(item);var token_value=item[token_type];var desc="";switch(token_type){case"literal":desc=token_value;break;case"delimiter":desc=" ";break;case"singlequotedstring":desc=SingleQuotedString(token_value);break;case"doublequotedstring":desc=DoubleQuotedString(token_value);break;case"envvar_operation":desc=EnvVarOperation(token_value);break;case"envvar":desc=EnvVar(token_value);break;case"arithmetic":desc=Arithmetic(token_value);break;case"subshell":desc=Subshell(token_value);break;case"backtickshell":desc=BacktickShell(token_value);break;default:throw"Unknown Posix-Shell-Token '"+token_type+'"'}results.push(desc)});return results.join("")}function EnvVar(obj){return"${"+obj+"}"}function EnvVarOperation(obj){ob_utils.VerifyAllowedKeys(obj,["envvar","operation","value"]);var varname=obj["envvar"];var operation=obj["operation"];var value="";if(obj["value"]){value=Token(true,obj["value"])}return"${"+varname+operation+value+"}"}function SingleQuotedString(obj){return"'"+obj+"'"}function DoubleQuotedString(obj){var desc=Token(true,obj);return'"'+desc+'"'}function Subshell(obj){if(obj===null)return"$()";var desc=Command(obj);return"$("+desc+")"}function BacktickShell(obj){if(obj===null)return"``";var desc=Command(obj);return"`"+desc+"`"}function CompoundSubshell(obj){return"("+Command(obj)+")"}function CompoundCurrentshell(obj){return"{"+Command(obj)+" ; }"}function Arithmetic(obj){return"$(("+ArithmeticExpression(obj)+"))"}function ArithmeticExpression(obj){var op=ob_utils.GetOneKey(obj);var value=obj[op];switch(op){case"literal":return value;case"envvar":return EnvVar(value);case"arithmetics_op_list":return ArithmeticOpList(value);case"arithmetic":return ArithmeticExpression(value);case"subshell":return Subshell(value);default:throw"Uknown arithmetic operation '"+op+'"'}}function ArithmeticOpList(obj){ob_utils.VerifyArray(obj);var operand=obj[0];var value=ArithmeticExpression(operand);var i=1;while(i<obj.length){var operator=obj[i];var operand2=obj[i+1];i+=2;value=value+operator+ArithmeticExpression(operand2)}return value}return{DescribeShellCommand:Command}}},{"utils/object_utils":25,"utils/string_utils":29}],24:[function(_dereq_,module,exports){"use strict";var ob_utils=_dereq_("utils/object_utils");var str_utils=_dereq_("utils/string_utils");module.exports=ShellExecutor;function ShellExecutor(shell_process_state,external_programs){function isSpecialBuiltinUtility(cmd){var special_builtin_commands={"break":1,":":1,"continue":1,".":1,eval:1,exec:1,exit:1,"export":1,readonly:1,"return":1,set:1,shift:1,times:1,trap:1,unset:1};return cmd in special_builtin_commands}function isBuiltinUtility(cmd){var builtin_commands={alias:1,bc:1,cd:1,command:1,fc:1,fg:1,getopts:1,jobs:1,kill:1,newgrp:1,pwd:1,read:1,umask:1,unalias:1,Wait:1};return cmd in builtin_commands}function isNoSlash(cmd){return cmd.indexOf("/")==-1}function runExternalCommand(process_state,tokens){var command_name=tokens[0];if(!(command_name in external_programs)){throw"Shell Error: command not found: "+command_name}var prog_obj=new external_programs[command_name];var exit_code=prog_obj.run(process_state,tokens);return exit_code}function ExecCommandTree(obj){return Command(shell_process_state,obj)}function Command(process_state,obj){var type=ob_utils.GetOneKey(obj);var value=obj[type];switch(type){case"SimpleCommand":return SimpleCommand(process_state,value);case"and_or_list":return AndOrList(process_state,value);case"list":return List(process_state,value);case"pipeline":return Pipeline(process_state,value);case"compound_subshell":return CompoundSubshell(process_state,value);case"compound_currentshell":return CompoundCurrentshell(value);default:throw"Invalid Command type '"+type+'"'}}function Pipeline(process_state,obj){ob_utils.VerifyArray(obj);var exit_code=0;var orig_stdin=process_state.stdin;var previous_pipe_data=[];for(var i in obj){var cmd=obj[i];var new_ps=process_state.clone();if(orig_stdin){new_ps.stdin=orig_stdin;orig_stdin=null}else{new_ps.stdin.__push_lines(previous_pipe_data)}exit_code=Command(new_ps,cmd);previous_pipe_data=new_ps.stdout.__get_lines();process_state.stderr.put_lines(new_ps.stderr.__get_lines())}process_state.stdout.put_lines(previous_pipe_data);return exit_code}function List(process_state,obj){var exit_code=0;ob_utils.VerifyArray(obj);obj.forEach(function(item){var exec_type=ob_utils.GetOneKey(item);exit_code=Command(process_state,item[exec_type])});return exit_code}function AndOrList(process_state,obj){var exit_code=0;ob_utils.VerifyArray(obj);var cmd=obj[0];exit_code=Command(process_state,cmd);var i=1;while(i<obj.length){var condition=obj[i];var cmd=obj[i+1];i+=2;if(condition==="&&"&&exit_code===0||condition==="||"&&exit_code!==0){exit_code=Command(process_state,cmd)}}return exit_code}function SimpleCommand(process_state,obj){ob_utils.VerifyAllowedKeys(obj,["command","redirections","assignments"]);var exit_code=0;if("assignments"in obj){}if("redirections"in obj){}if("command"in obj){var tokens=Token(process_state,true,obj["command"]);if(tokens.length===0)throw"SimpleCommand: internal error, got empty 'command'";var command_name=tokens[0];if(isNoSlash(command_name)){if(isSpecialBuiltinUtility(command_name)){runSpecialBuiltinUtility(tokens)}else if(isBuiltinUtility(command_name)){runBuiltinUtility(tokens)}else{exit_code=runExternalCommand(process_state,tokens)}}else{throw"Agnostic Emulation error: executables with specific path are not supported ("+command_name+")"}}else{}return exit_code}function Assignments(obj){ob_utils.VerifyArray(obj);var results=[];obj.forEach(function(item){var varname=ob_utils.GetOneKey(item);var value_token=item[varname];var value=Token(false,value_token);var desc=varname+"="+value;results.push(desc)});return results.join(" ")}function Redirections(obj){ob_utils.VerifyArray(obj);return""}function Token(process_state,allow_multiple_fields,obj){var results=[];ob_utils.VerifyBoolean(allow_multiple_fields);ob_utils.VerifyArray(obj);obj.forEach(function(item){var token_type=ob_utils.GetOneKey(item);var token_value=item[token_type];var desc="";switch(token_type){case"literal":desc=token_value;break;case"delimiter":desc=" ";break;case"singlequotedstring":desc=SingleQuotedString(process_state,token_value);break;case"doublequotedstring":desc=DoubleQuotedString(process_state,token_value);break;case"envvar_operation":desc=EnvVarOperation(token_value);break;case"envvar":desc=EnvVar(token_value);break;case"arithmetic":desc=Arithmetic(process_state,token_value);break;case"subshell":desc=Subshell(process_state,token_value);break;case"backtickshell":desc=BacktickShell(token_value);break;default:throw"Unknown Posix-Shell-Token '"+token_type+'"'}results.push(desc)});var str=results.join("");var fields=[];if(allow_multiple_fields)fields=str_utils.splitShellquotes(str);else fields.push(str);for(var i in fields){fields[i]=str_utils.removeShellquotes(fields[i])}return fields}function EnvVar(obj){return"${"+obj+"}"}function EnvVarOperation(obj){ob_utils.VerifyAllowedKeys(obj,["envvar","operation","value"]);var varname=obj["envvar"];var operation=obj["operation"];var value="";if(obj["value"]){value=Token(true,obj["value"])}return"${"+varname+operation+value+"}"}function SingleQuotedString(process_state,obj){return"'"+obj+"'"}function DoubleQuotedString(process_state,obj){var desc=Token(process_state,false,obj);return'"'+desc+'"'}function Subshell(process_state,obj){if(obj===null)return"";var new_ps=process_state.clone();new_ps.stdin=process_state.stdin;var exit_code=Command(new_ps,obj);process_state.stderr.put_lines(new_ps.stderr.__get_lines());var output=new_ps.stdout.__get_lines().join(" ");return output}function BacktickShell(obj){if(obj===null)return"";var new_ps=process_state.clone();new_ps.stdin=process_state.stdin;var exit_code=Command(new_ps,obj);process_state.stderr.put_lines(new_ps.stderr.__get_lines());var output=new_ps.stdout.__get_lines().join(" ");return output}function CompoundSubshell(process_state,obj){var new_ps=process_state.clone();new_ps.stdin=process_state.stdin;var exit_code=Command(new_ps,obj);process_state.stderr.put_lines(new_ps.stderr.__get_lines());process_state.stdout.put_lines(new_ps.stdout.__get_lines());return exit_code}function CompoundCurrentshell(obj){return"{"+Command(obj)+" ; }"}function Arithmetic(process_state,obj){return ArithmeticExpression(process_state,obj)}function ArithmeticExpression(process_state,obj){var op=ob_utils.GetOneKey(obj);var value=obj[op];switch(op){case"literal":if(ob_utils.IsStrictDecimalIntegerValue(value))return parseInt(value,10);case"envvar":return EnvVar(process_state,value);case"arithmetics_op_list":return ArithmeticOpList(process_state,value);case"arithmetic":return ArithmeticExpression(process_state,value);case"subshell":return Subshell(process_state,value);default:throw"Uknown arithmetic operation '"+op+'"'}}function ArithmeticOpList(process_state,obj){ob_utils.VerifyArray(obj);var operand=obj[0];var value=ArithmeticExpression(process_state,operand);var i=1;while(i<obj.length){var operator=obj[i];var operand2=obj[i+1];i+=2;var value2=ArithmeticExpression(process_state,operand2);switch(operator){case"+":value+=value2;break;case"-":value-=value2;break;case"*":value*=value2;break;case"/":value/=value2;break;default:throw"Invalid arithmetic operator: "+operator}}return value}return{ExecuteCommand:ExecCommandTree}}},{"utils/object_utils":25,"utils/string_utils":29}],25:[function(_dereq_,module,exports){module.exports=new ObjectUtils;function ObjectUtils(){function IsObjectEmpty(obj){return Object.keys(obj).length===0}this.IsObjectEmpty=IsObjectEmpty;function GetObjectType(obj){var s=Object.prototype.toString.call(obj);return s}this.GetObjectType=GetObjectType;function IsNumber(obj){var s=GetObjectType(obj);return s==="[object Number]"}this.IsNumber=IsNumber;function VerifyNumber(obj){if(!IsNumber(obj))throw new TypeError("variable is not a number")}this.VerifyNumber=VerifyNumber;function IsInteger(obj){return IsNumber(obj)&&Math.floor(obj)==obj}this.IsInteger=IsInteger;function VerifyInteger(obj){if(!IsInteger(obj))throw new TypeError("variable is not an Integer")}this.VerifyInteger=VerifyInteger;function IsBoolean(obj){var s=GetObjectType(obj);return s==="[object Boolean]"}this.IsBoolean=IsBoolean;function VerifyBoolean(obj){if(!IsBoolean(obj))throw new TypeError("variable is not boolean")}this.VerifyBoolean=VerifyBoolean;function IsString(obj){var s=GetObjectType(obj);return s==="[object String]"}this.IsString=IsString;function VerifyString(obj){if(!IsString(obj))throw new TypeError("variable is not string")}this.VerifyString=VerifyString;function IsStringFloatValue(num){if(IsNumber(num))return true;if(IsString(num)&&(/^[ \t]*[-+]?[0-9]*\.?[0-9]+$/.test(num)||/^[ \t]*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/.test(num)))return true;return false}this.IsStrictFloatValue=IsStringFloatValue;function IsStrictDecimalIntegerValue(num){if(IsInteger(num))return true;if(IsString(num)&&/^[ \t]*[-+]?[0-9]+$/.test(num))return true;return false}this.IsStrictDecimalIntegerValue=IsStrictDecimalIntegerValue;function IsObject(obj){var s=GetObjectType(obj);return s==="[object Object]"}this.IsObject=IsObject;function VerifyObject(obj){if(!IsObject(obj))throw new TypeError("'obj' is not a valid object: "+JSON.jsonify(obj))}this.VerifyObject=VerifyObject;function IsArray(obj){var s=GetObjectType(obj);return s==="[object Array]"}this.IsArray=IsArray;function VerifyArray(obj){if(!IsArray(obj))throw new TypeError("'obj' is not a valid array:"+JSON.jsonify(obj))}this.VerifyArray=VerifyArray;function VerifyAllowedKeys(obj,allowed_keys_array){VerifyObject(obj);var allowed_keys={};for(var i in allowed_keys_array){allowed_keys[allowed_keys_array[i]]=1}for(var key in obj){var ok=key in allowed_keys;if(!(key in allowed_keys))throw new TypeError(":'obj' contains disallowed key '"+key+"'"+" allowed-keys = '"+allowed_keys_array.toString()+"': "+JSON.jsonify(obj))}}this.VerifyAllowedKeys=VerifyAllowedKeys;function VerifyOneKey(obj){VerifyObject(obj);if(Object.keys(obj).length==0)throw new TypeError("'obj' is empty");if(Object.keys(obj).length>1)throw new TypeError("'obj' contains more than one key: "+JSON.jsonify(obj))}this.VerifyOneKey=VerifyOneKey;function GetOneKey(obj){VerifyOneKey(obj);for(var key in obj){return key}}this.GetOneKey=GetOneKey}},{}],26:[function(_dereq_,module,exports){"use strict";module.exports=new path_utils;function path_utils(){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function splitPath(filename){return splitPathRe.exec(filename).slice(1)}function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}function isAbsolute(path){return path.charAt(0)==="/"}function canonicalize(path){var isAbs=isAbsolute(path),trailingSlash=path[path.length-1]==="/",segments=path.split("/"),nonEmptySegments=[];for(var i=0;i<segments.length;i++){if(segments[i]){nonEmptySegments.push(segments[i])}}path=normalizeArray(nonEmptySegments,!isAbs).join("/");if(!path&&!isAbs){path="."}return(isAbs?"/":"")+path}function dirname(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir}function basename(path,ext){var t=splitPath(path);var f=t[2];if(t[0]==="/"&&t[1]===""&&t[2]==="")return t[0];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)
}return f}function dirname(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir}this.dirname=dirname;this.basename=basename;this.canonicalize=canonicalize;this.isAbsolute=isAbsolute}},{}],27:[function(_dereq_,module,exports){"use strict";module.exports=goBasicParser;function ASSERT(value,msg){if(!value){var txt="getopt assertion failed";if(msg)txt+=" ("+msg+")";throw new Error(msg)}}function goBasicParser(optstring,argv){var ii;ASSERT(optstring||optstring==="","optstring is required");ASSERT(optstring.constructor===String,"optstring must be a string");ASSERT(argv,"argv is required");ASSERT(argv.constructor===Array,"argv must be an array");this.gop_argv=new Array(argv.length);this.gop_options={};this.gop_aliases={};this.gop_optind=0;this.gop_subind=0;for(ii=0;ii<argv.length;ii++){if(argv[ii].constructor!==String)throw new Error("getopt: argv must be string array");this.gop_argv[ii]=argv[ii]}this.parseOptstr(optstring)}goBasicParser.prototype.parseOptstr=function(optstr){var chr,cp,alias,arg,ii;ii=0;if(optstr.length>0&&optstr[0]==":"){this.gop_silent=true;ii++}else{this.gop_silent=false}while(ii<optstr.length){chr=optstr[ii];arg=false;if(!/^[\w\d\u1000-\u1100]$/.test(chr))throw new Error("getopt: invalid optstring: only alphanumeric "+"characters may be used as options: "+chr);if(ii+1<optstr.length&&optstr[ii+1]==":"){arg=true;ii++}this.gop_options[chr]=arg;while(ii+1<optstr.length&&optstr[ii+1]=="("){ii++;cp=optstr.indexOf(")",ii+1);if(cp==-1)throw new Error("invalid optstring: missing "+'")" to match "(" at char '+ii);alias=optstr.substring(ii+1,cp);this.gop_aliases[alias]=chr;ii=cp}ii++}};goBasicParser.prototype.optind=function(){return this.gop_optind};goBasicParser.prototype.getopt=function(){if(this.gop_optind>=this.gop_argv.length)return undefined;var arg=this.gop_argv[this.gop_optind];if(this.gop_subind===0){if(arg=="-"||arg===""||arg[0]!="-")return undefined;if(arg=="--"){this.gop_optind++;this.gop_subind=0;return undefined}if(arg[1]=="-")return this.getoptLong();this.gop_subind++;ASSERT(this.gop_subind<arg.length)}return this.getoptShort()};goBasicParser.prototype.getoptShort=function(){var arg,chr;ASSERT(this.gop_optind<this.gop_argv.length);arg=this.gop_argv[this.gop_optind];ASSERT(this.gop_subind<arg.length);chr=arg[this.gop_subind];if(++this.gop_subind>=arg.length){this.gop_optind++;this.gop_subind=0}if(!(chr in this.gop_options))return this.errInvalidOption(chr);if(!this.gop_options[chr])return{option:chr};return this.getoptArgument(chr)};goBasicParser.prototype.getoptLong=function(){var arg,alias,chr,eq;ASSERT(this.gop_subind===0);ASSERT(this.gop_optind<this.gop_argv.length);arg=this.gop_argv[this.gop_optind];ASSERT(arg.length>2&&arg[0]=="-"&&arg[1]=="-");eq=arg.indexOf("=");alias=arg.substring(2,eq==-1?arg.length:eq);if(!(alias in this.gop_aliases))return this.errInvalidOption(alias);chr=this.gop_aliases[alias];ASSERT(chr in this.gop_options);if(!this.gop_options[chr]){if(eq!=-1)return this.errExtraArg(alias);this.gop_optind++;return{option:chr}}if(eq==-1)this.gop_optind++;else this.gop_subind=eq+1;return this.getoptArgument(chr)};goBasicParser.prototype.getoptArgument=function(chr){var arg;if(this.gop_optind>=this.gop_argv.length)return this.errMissingArg(chr);arg=this.gop_argv[this.gop_optind].substring(this.gop_subind);this.gop_optind++;this.gop_subind=0;return{option:chr,optarg:arg}};goBasicParser.prototype.errMissingArg=function(chr){var errmsg="option requires an argument -- "+chr;if(this.gop_silent)return{option:"?",optopt:chr,error:true,errmsg:errmsg};console.warn(errmsg);return{option:"?",optopt:chr,error:true}};goBasicParser.prototype.errInvalidOption=function(chr){var errmsg="illegal option -- "+chr;if(!this.gop_silent)console.warn(errmsg);return{option:"?",optopt:chr,error:true,errmsg:errmsg}};goBasicParser.prototype.errExtraArg=function(chr){var errmsg="option expects no argument -- "+chr;if(!this.gop_silent)console.warn(errmsg);return{option:"?",optopt:chr,error:true,errmsg:errmsg}}},{}],28:[function(_dereq_,module,exports){(function(window){var re={not_string:/[^s]/,number:/[def]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function sprintf(){var key=arguments[0],cache=sprintf.cache;if(!(cache[key]&&cache.hasOwnProperty(key))){cache[key]=sprintf.parse(key)}return sprintf.format.call(null,cache[key],arguments)}function sprintf_format_get_default_values(format){var key=format,cache=sprintf.cache;if(!(cache[format]&&cache.hasOwnProperty(format))){cache[format]=sprintf.parse(format)}var parse_tree=cache[format];var output=[];for(var i in parse_tree){var match=parse_tree[i];node_type=get_type(match);if(node_type==="string")continue;var specifier=match[8];if(specifier==="s")output.push("");else output.push(0)}return output}sprintf.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length,is_positive=true,sign="";for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output[output.length]=parse_tree[i]}else if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf("[sprintf] property '%s' does not exist",match[2][k]))}arg=arg[match[2][k]]}}else if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}if(get_type(arg)=="function"){arg=arg()}if(re.not_string.test(match[8])&&(get_type(arg)!="number"&&isNaN(arg))){throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)))}if(re.number.test(match[8])){is_positive=arg>=0}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=arg>>>0;break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}if(!is_positive||re.number.test(match[8])&&match[3]){sign=is_positive?"+":"-";arg=arg.toString().replace(re.sign,"")}pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-(sign+arg).length;pad=match[6]?str_repeat(pad_character,pad_length):"";output[output.length]=match[5]?sign+arg+pad:pad_character==0?sign+pad+arg:pad+sign+arg}}return output.join("")};sprintf.cache={};sprintf.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=re.text.exec(_fmt))!==null){parse_tree[parse_tree.length]=match[0]}else if((match=re.modulo.exec(_fmt))!==null){parse_tree[parse_tree.length]="%"}else if((match=re.placeholder.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=re.key.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1];while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=re.key_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1]}else if((field_match=re.index_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1]}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree[parse_tree.length]=match}else{throw new SyntaxError("[sprintf] unexpected placeholder")}_fmt=_fmt.substring(match[0].length)}return parse_tree};var vsprintf=function(fmt,argv,_argv){_argv=(argv||[]).slice(0);_argv.splice(0,0,fmt);return sprintf.apply(null,_argv)};function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){return Array(multiplier+1).join(input)}if(typeof exports!=="undefined"){exports.sprintf=sprintf;exports.vsprintf=vsprintf;exports.sprintf_format_get_default_values=sprintf_format_get_default_values}else{window.sprintf=sprintf;window.vsprintf=vsprintf;window.sprintf_format_get_default_values=sprintf_format_get_default_values;if(typeof define==="function"&&define.amd){define(function(){return{sprintf:sprintf,vsprintf:vsprintf,sprintf_format_get_default_values:sprintf_format_get_default_values}})}}})(typeof window==="undefined"?this:window)},{}],29:[function(_dereq_,module,exports){"use strict";module.exports=new string_utils;function string_utils(){this.startsWith=function(str,prefix){if(prefix.length===0)return true;return str.slice(0,prefix.length)==prefix};this.endsWith=function(str,suffix){if(suffix.length===0)return true;return str.slice(-suffix.length)==suffix};this.trimWhitespace=function(str){var tmp=str.replace(/[ \t]+$/,"");tmp=tmp.replace(/^[ \t]+/,"");return tmp};this.splitShellquotes=function(text){text=text.replace(/[ \t\n]+$/,"");text=text.replace(/^[ \t\n]+/,"");var fields=[];var chars=text.split("");var current="";var in_quotes=null;while(chars.length>0){var ch=chars.shift();switch(ch){case" ":case"	":case"\n":if(in_quotes===null){if(current!=="")fields.push(current);current="";continue}break;case'"':if(in_quotes===null){in_quotes='"'}else if(in_quotes==='"'){in_quotes=null}else{}break;case"'":if(in_quotes===null){in_quotes="'"}else if(in_quotes==="'"){in_quotes=null}else{}break;case"\\":break}current+=ch}if(current!=="")fields.push(current);if(in_quotes!==null)throw new Error("ShellQuotesSplit: unbalanced quotes in string ("+text+")");return fields};this.removeShellquotes=function(text){var result="";var chars=text.split("");var in_quotes=null;while(chars.length>0){var ch=chars.shift();if(ch==="'"||ch==='"'){if(in_quotes===null){in_quotes=ch;continue}else if(in_quotes===ch){in_quotes=null;continue}else{}}result+=ch}if(in_quotes!==null)throw new Error("ShellQuotesSplit: unbalanced quotes in string ("+text+")");return result};this.unbackslash=function(text){var result="";var chars=text.split("");while(chars.length>0){var ch=chars.shift();if(ch==="\\"&&chars.length>0){ch=chars.shift();switch(ch){case"t":ch="	";break;case"n":ch="\n";break}}result+=ch}return result}}},{}],30:[function(_dereq_,module,exports){"use strict";module.exports=new time_utils;function time_utils(){this.get_sys_time=function(){var d=new Date;var n=d.getTime();return Math.floor(n/1e3)}}},{}]},{},[1])(1)});